###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.1.40194/W32 for 8051         17/Apr/2020  14:58:02 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\Source\EndDevice.c #
#    Command line       =  -f F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\Tools\CC2530DB\f8wRouter.cfg (-DCPU32MHZ        #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8       #
#                          -DMAC_CFG_RX_MAX=5 -DRTR_NWK) -f                   #
#                          F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          Tools\CC2530DB\f8wConfig.cfg (-DZIGBEEPRO          #
#                          -DSECURE=0 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR       #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 F:\zigbee程序\模块程序v1.0\ #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Sampl #
#                          eApp\Source\EndDevice.c -D ZTOOL_P1 -D MT_TASK -D  #
#                          MT_SYS_FUNC -D MT_ZDO_FUNC -D                      #
#                          xLCD_SUPPORTED=DEBUG -D NV_INIT -D NV_RESTORE -lC  #
#                          F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\RouterEB\ #
#                          List\ -lA F:\zigbee程序\模块程序v1.0\ZStack-CC2530 #
#                          -2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB #
#                          \RouterEB\List\ --diag_suppress Pe001,Pa010 -o     #
#                          F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\RouterEB\ #
#                          Obj\ -e --no_code_motion --debug --core=plain      #
#                          --dptr=16,1 --data_model=large                     #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I F:\zigbee程序\模块程序v1.0 #
#                          \ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Samp #
#                          leApp\CC2530DB\ -I F:\zigbee程序\模块程序v1.0\ZSta #
#                          ck-CC2530-2.5.1a\Projects\zstack\Samples\SampleApp #
#                          \CC2530DB\..\Source\ -I F:\zigbee程序\模块程序v1.0 #
#                          \ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Samp #
#                          leApp\CC2530DB\..\..\..\ZMain\TI2530DB\ -I         #
#                          F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\hal\include\ -I                   #
#                          F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\hal\target\CC2530EB\ -I           #
#                          F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\mac\include\ -I                   #
#                          F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\mac\high_level\ -I                #
#                          F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\mac\low_level\srf04\ -I           #
#                          F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\mac\low_level\srf04\single_chip\  #
#                          -I F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\mt\ -I                         #
#                          F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\osal\include\ -I                  #
#                          F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\services\saddr\ -I                #
#                          F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\services\sdata\ -I                #
#                          F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\stack\af\ -I                      #
#                          F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\stack\nwk\ -I                     #
#                          F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\stack\sapi\ -I                    #
#                          F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\stack\sec\ -I                     #
#                          F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\stack\sys\ -I                     #
#                          F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\stack\zdo\ -I                     #
#                          F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\zmac\ -I                          #
#                          F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\zmac\f8w\ -Ohz                    #
#                          --require_prototypes                               #
#    List file          =  F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\RouterEB\ #
#                          List\EndDevice.lst                                 #
#    Object file        =  F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\RouterEB\ #
#                          Obj\EndDevice.r51                                  #
#                                                                             #
#                                                                             #
###############################################################################

F:\zigbee程序\模块程序v1.0\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\SampleApp\Source\EndDevice.c
      1          /**************************************************************************************************
      2            Filename:       SampleApp.c
      3            Revised:        $Date: 2009-03-18 15:56:27 -0700 (Wed, 18 Mar 2009) $
      4            Revision:       $Revision: 19453 $
      5          
      6            Description:    Sample Application (no Profile).
      7          
      8          
      9            Copyright 2007 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          /*********************************************************************
     41            This application isn't intended to do anything useful, it is
     42            intended to be a simple example of an application's structure.
     43          
     44            This application sends it's messages either as broadcast or
     45            broadcast filtered group messages.  The other (more normal)
     46            message addressing is unicast.  Most of the other sample
     47            applications are written to support the unicast message model.
     48          
     49            Key control:
     50              SW1:  Sends a flash command to all devices in Group 1.
     51              SW2:  Adds/Removes (toggles) this device in and out
     52                    of Group 1.  This will enable and disable the
     53                    reception of the flash command.
     54          *********************************************************************/
     55          
     56          /*********************************************************************
     57           * INCLUDES
     58           */
     59          #include "OSAL.h"
     60          #include "ZGlobals.h"
     61          #include "AF.h"
     62          #include "aps_groups.h"
     63          #include "ZDApp.h"
     64          #include "sapi.h"
     65          #include "MT_SYS.h"
     66          #include "OSAL_Nv.h"
     67          
     68          #include "SampleApp.h"
     69          #include "SampleAppHw.h"
     70          
     71          #include "OnBoard.h"

   \                                 In  segment SFR_AN, at 0xa8
   \   union <unnamed> volatile __sfr _A_IEN0
   \                     _A_IEN0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xc9
   \   unsigned char volatile __sfr WDCTL
   \                     WDCTL:
   \   000000                DS 1
     72          
     73          /* HAL */
     74          #include "hal_lcd.h"
     75          #include "hal_led.h"
     76          #include "hal_key.h"
     77          #include "hal_uart.h"
     78          
     79          //定义事件
     80          #define SEND_DATA_EVENT 0x01
     81          #define RESET_EVENT 0x02
     82          #define P2P_SEND_EVT 0x03
     83          
     84          #define SAMPLEAPP_RESET_EVT 0x0F
     85          
     86          /*********************************************************************
     87           * MACROS
     88           */
     89          
     90          /*********************************************************************
     91           * CONSTANTS
     92           */
     93          
     94          /*********************************************************************
     95           * TYPEDEFS
     96           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     97          uint8 uart_rdata[40];         //数据暂存器，最多能够缓存40个字节
   \                     uart_rdata:
   \   000000                DS 40
   \   000028                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     98          uint8 uart_rdlenrightflag=0; //数据长度校验位正确标志
   \                     uart_rdlenrightflag:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     99          uint8 uart_rdsuccessflag=0;  //成功接收到数据信息标志位
   \                     uart_rdsuccessflag:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    100          uint8 uart_rd_enableflag=0;   //接受状态标记
   \                     uart_rd_enableflag:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    101          uint8 uart_rdlen=0;          //有用信息的数据长度
   \                     uart_rdlen:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    102          uint8 uart_rdlentemp=0;      //用来记录已读数据长度
   \                     uart_rdlentemp:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    103          uint8 reset_flag=0;
   \                     reset_flag:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    104          uint8 send_rdata[128];
   \                     send_rdata:
   \   000000                DS 128
   \   000080                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    105          uint8 num[8];
   \                     num:
   \   000000                DS 8
   \   000008                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    106          uint8 num1[8];
   \                     num1:
   \   000000                DS 8
   \   000008                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    107          uint16 mypanid;
   \                     mypanid:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    108          /*********************************************************************
    109           * GLOBAL VARIABLES
    110           */
    111          
    112          // This list should be filled with Application specific Cluster IDs.

   \                                 In  segment XDATA_ROM_C, align 1
    113          const cId_t SampleApp_ClusterList[SAMPLEAPP_MAX_CLUSTERS] =
   \                     SampleApp_ClusterList:
   \   000000   0100         DW 1
   \   000002   0000         DW 0
    114          {
    115            SAMPLEAPP_CLUSTERID
    116          };
    117          

   \                                 In  segment XDATA_ROM_C, align 1
    118          const SimpleDescriptionFormat_t SampleApp_SimpleDesc =
   \                     SampleApp_SimpleDesc:
   \   000000   14           DB 20
   \   000001   080F         DW 3848
   \   000003   0100         DW 1
   \   000005   00           DB 0
   \   000006   02           DB 2
   \   000007   ....         DW SampleApp_ClusterList
   \   000009   00           DB 0
   \   00000A   0000         DW 0H
    119          {
    120            SAMPLEAPP_ENDPOINT,              //  int Endpoint;
    121            SAMPLEAPP_PROFID,                //  uint16 AppProfId[2];
    122            SAMPLEAPP_DEVICEID,              //  uint16 AppDeviceId[2];
    123            SAMPLEAPP_DEVICE_VERSION,        //  int   AppDevVer:4;
    124            SAMPLEAPP_FLAGS,                 //  int   AppFlags:4;
    125            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    126            (cId_t *)SampleApp_ClusterList,  //  uint8 *pAppInClusterList;
    127            0,                               //  uint8  AppNumInClusters;
    128            (cId_t *)NULL                    //  uint8 *pAppInClusterList;
    129          };
    130          
    131          // This is the Endpoint/Interface description.  It is defined here, but
    132          // filled-in in SampleApp_Init().  Another way to go would be to fill
    133          // in the structure here and make it a "const" (in code space).  The
    134          // way it's defined in this sample app it is define in RAM.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    135          endPointDesc_t SampleApp_epDesc;
   \                     SampleApp_epDesc:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z
    136          
    137          /*********************************************************************
    138           * EXTERNAL VARIABLES
    139           */
    140          
    141          /*********************************************************************
    142           * EXTERNAL FUNCTIONS
    143           */
    144          
    145          /*********************************************************************
    146           * LOCAL VARIABLES
    147           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    148          uint8 SampleApp_TaskID;   
   \                     SampleApp_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    149          uint8 SampleApp_TransID;  
   \                     SampleApp_TransID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    150          devStates_t SampleApp_NwkState;  //保存节点状态
   \                     SampleApp_NwkState:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    151          /*********************************************************************
    152           * LOCAL FUNCTIONS
    153           */
    154          void Uart_Read( uint8 port, uint8 event );
    155          void Uart_Write(uint8 cmd,uint8 port,uint8 *buf, uint16 len);
    156          void ShowInfo(void);
    157          void To_string(uint8 * dest, char * src, uint8 length);
    158          void SampleApp_MessageMSGCB( afIncomingMSGPacket_t *pkt );
    159          /*********************************************************************
    160           * NETWORK LAYER CALLBACKS
    161           */
    162          
    163          /*********************************************************************
    164           * PUBLIC FUNCTIONS
    165           */
    166          
    167          /*********************************************************************
    168           * @fn      SampleApp_Init
    169           *
    170           * @brief   Initialization function for the Generic App Task.
    171           *          This is called during initialization and should contain
    172           *          any application specific initialization (ie. hardware
    173           *          initialization/setup, table initialization, power up
    174           *          notificaiton ... ).
    175           *
    176           * @param   task_id - the ID assigned by OSAL.  This ID should be
    177           *                    used to send messages and set timers.
    178           *
    179           * @return  none
    180           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    181          void SampleApp_Init( uint8 task_id )
   \                     SampleApp_Init:
    182          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 29
   \   000005   74E3         MOV     A,#-0x1d
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
    183            SampleApp_TaskID = task_id;
   \   00000B   90....       MOV     DPTR,#SampleApp_TaskID
   \   00000E   F0           MOVX    @DPTR,A
    184            SampleApp_TransID = 0;
   \   00000F   90....       MOV     DPTR,#SampleApp_TransID
   \   000012   E4           CLR     A
   \   000013   F0           MOVX    @DPTR,A
    185          
    186            // Fill out the endpoint description.
    187            SampleApp_epDesc.endPoint = SAMPLEAPP_ENDPOINT;
   \   000014   90....       MOV     DPTR,#SampleApp_epDesc
   \   000017   7414         MOV     A,#0x14
   \   000019   F0           MOVX    @DPTR,A
    188            SampleApp_epDesc.task_id = &SampleApp_TaskID;
   \   00001A   A3           INC     DPTR
   \   00001B   74..         MOV     A,#SampleApp_TaskID & 0xff
   \   00001D   F0           MOVX    @DPTR,A
   \   00001E   A3           INC     DPTR
   \   00001F   74..         MOV     A,#(SampleApp_TaskID >> 8) & 0xff
   \   000021   F0           MOVX    @DPTR,A
    189            SampleApp_epDesc.simpleDesc
    190                      = (SimpleDescriptionFormat_t *)&SampleApp_SimpleDesc;
   \   000022   A3           INC     DPTR
   \   000023   74..         MOV     A,#SampleApp_SimpleDesc & 0xff
   \   000025   F0           MOVX    @DPTR,A
   \   000026   A3           INC     DPTR
   \   000027   74..         MOV     A,#(SampleApp_SimpleDesc >> 8) & 0xff
   \   000029   F0           MOVX    @DPTR,A
    191            SampleApp_epDesc.latencyReq = noLatencyReqs;
   \   00002A   A3           INC     DPTR
   \   00002B   E4           CLR     A
   \   00002C   F0           MOVX    @DPTR,A
    192          
    193            // Register the endpoint description with the AF
    194            afRegister( &SampleApp_epDesc );
   \   00002D                ; Setup parameters for call to function afRegister
   \   00002D   7A..         MOV     R2,#SampleApp_epDesc & 0xff
   \   00002F   7B..         MOV     R3,#(SampleApp_epDesc >> 8) & 0xff
   \   000031   12....       LCALL   ??afRegister?relay
    195            halUARTCfg_t uartConfig;
    196            //------------------------配置串口---------------------------------
    197            uartConfig.configured=TRUE;
   \   000034   85..82       MOV     DPL,?XSP + 0
   \   000037   85..83       MOV     DPH,?XSP + 1
   \   00003A   7401         MOV     A,#0x1
   \   00003C   F0           MOVX    @DPTR,A
    198            uartConfig.baudRate=HAL_UART_BR_115200;
   \   00003D   12....       LCALL   ?XSTACK_DISP0_8
   \   000040   7404         MOV     A,#0x4
   \   000042   F0           MOVX    @DPTR,A
    199            uartConfig.flowControl=FALSE;
   \   000043   7402         MOV     A,#0x2
   \   000045   12....       LCALL   ?XSTACK_DISP0_8
   \   000048   E4           CLR     A
   \   000049   F0           MOVX    @DPTR,A
    200            uartConfig.callBackFunc=Uart_Read;
   \   00004A   741B         MOV     A,#0x1b
   \   00004C   12....       LCALL   ?XSTACK_DISP0_8
   \   00004F   74..         MOV     A,#??Uart_Read?relay & 0xff
   \   000051   F0           MOVX    @DPTR,A
   \   000052   A3           INC     DPTR
   \   000053   74..         MOV     A,#(??Uart_Read?relay >> 8) & 0xff
   \   000055   F0           MOVX    @DPTR,A
    201            HalUARTOpen(0,&uartConfig);
   \   000056                ; Setup parameters for call to function HalUARTOpen
   \   000056   85..82       MOV     DPL,?XSP + 0
   \   000059   85..83       MOV     DPH,?XSP + 1
   \   00005C   AA82         MOV     R2,DPL
   \   00005E   AB83         MOV     R3,DPH
   \   000060   7900         MOV     R1,#0x0
   \   000062   12....       LCALL   ??HalUARTOpen?relay
    202            HalUARTWrite(0,"uartinit",8); 
   \   000065                ; Setup parameters for call to function HalUARTWrite
   \   000065   7C08         MOV     R4,#0x8
   \   000067   7D00         MOV     R5,#0x0
   \   000069   7A..         MOV     R2,#`?<Constant "uartinit">` & 0xff
   \   00006B   7B..         MOV     R3,#(`?<Constant "uartinit">` >> 8) & 0xff
   \   00006D   7900         MOV     R1,#0x0
   \   00006F   12....       LCALL   ??HalUARTWrite?relay
    203          }
   \   000072   741D         MOV     A,#0x1d
   \   000074   12....       LCALL   ?DEALLOC_XSTACK8
   \   000077                REQUIRE ?Subroutine0
   \   000077                ; // Fall through to label ?Subroutine0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   7F01         MOV     R7,#0x1
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA
    204          
    205          /*********************************************************************
    206           * @fn      SampleApp_ProcessEvent
    207           *
    208           * @brief   Generic Application Task event processor.  This function
    209           *          is called to process all events for the task.  Events
    210           *          include timers, messages and any other user defined events.
    211           *
    212           * @param   task_id  - The OSAL assigned task ID.
    213           * @param   events - events to process.  This is a bit map and can
    214           *                   contain more than one event.
    215           *
    216           * @return  none
    217           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    218          uint16 SampleApp_ProcessEvent( uint8 task_id, uint16 events )
   \                     SampleApp_ProcessEvent:
    219          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    220            afIncomingMSGPacket_t *MSGpkt;
    221            (void)task_id;  // Intentionally unreferenced parameter 
    222          
    223            afDataConfirm_t *afDataConfirm;
    224            byte sentEP;
    225            ZStatus_t sentStatus;
    226            byte sentTransID;  
    227            
    228            if ( events & SYS_EVENT_MSG )
   \   000009   5480         ANL     A,#0x80
   \   00000B   7003         JNZ     $+5
   \   00000D   02....       LJMP    ??SampleApp_ProcessEvent_0 & 0xFFFF
    229            {
    230              MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( SampleApp_TaskID );
   \   000010                ; Setup parameters for call to function osal_msg_receive
   \   000010   8014         SJMP    ??SampleApp_ProcessEvent_1
    231              while ( MSGpkt )
    232              {
    233                
    234                switch ( MSGpkt->hdr.event )
    235                {
    236                  case ZDO_STATE_CHANGE://网络状态改变事件
    237                    SampleApp_NwkState = (devStates_t)(MSGpkt->hdr.status);
    238                    
    239                    if(SampleApp_NwkState==DEV_INIT)
    240                    {
    241                      HalUARTWrite(0,"init",4);
    242                     
    243                    }
    244                    if(SampleApp_NwkState==DEV_NWK_DISC)
    245                    {
    246                        HalUARTWrite(0,"disc",4);
    247                        reset_flag++;
    248                        if(reset_flag==RESET_TRY_TIMES){
    249                            osal_set_event(SampleApp_TaskID,RESET_EVENT);
    250                        } 
    251                    }
    252                    if(SampleApp_NwkState==DEV_END_DEVICE||SampleApp_NwkState==DEV_ROUTER)
    253                    {
    254                        //HalUARTWrite(0,"join",4);
    255                        osal_set_event(SampleApp_TaskID,SEND_DATA_EVENT);
    256                    }
    257                    break;
    258                    
    259                    case AF_INCOMING_MSG_CMD://接收到数据的事件
    260                        SampleApp_MessageMSGCB( MSGpkt );
    261                    break;
    262          
    263                    case AF_DATA_CONFIRM_CMD:      
    264                      afDataConfirm = (afDataConfirm_t *)MSGpkt;
    265                      sentEP = afDataConfirm->endpoint;
    266                      sentStatus = afDataConfirm->hdr.status;
    267                      sentTransID = afDataConfirm->transID;
    268                      (void)sentEP;
    269                      (void)sentTransID;
    270          
    271                      if ( sentStatus != ZSuccess ){
    272                        HalUARTWrite(0,"not ok",6);
    273                      }
    274                      if(sentStatus == ZSuccess){
    275                        HalUARTWrite(0,"ok",2);
   \                     ??SampleApp_ProcessEvent_2:
   \   000012                ; Setup parameters for call to function HalUARTWrite
   \   000012   7C02         MOV     R4,#0x2
   \   000014   7D00         MOV     R5,#0x0
   \   000016   7A..         MOV     R2,#`?<Constant "ok">` & 0xff
   \   000018   7B..         MOV     R3,#(`?<Constant "ok">` >> 8) & 0xff
   \                     ??SampleApp_ProcessEvent_3:
   \   00001A   7900         MOV     R1,#0x0
   \   00001C   12....       LCALL   ??HalUARTWrite?relay
    276                      }
    277                    break;
    278                    
    279                  default:
    280                    break;
    281                }    
    282                // 释放内存
    283                osal_msg_deallocate( (uint8 *)MSGpkt );
   \                     ??SampleApp_ProcessEvent_4:
   \   00001F                ; Setup parameters for call to function osal_msg_deallocate
   \   00001F   AA..         MOV     R2,?V0 + 0
   \   000021   AB..         MOV     R3,?V0 + 1
   \   000023   12....       LCALL   ??osal_msg_deallocate?relay
    284                // Next - if one is available
    285                MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( SampleApp_TaskID );
   \   000026                ; Setup parameters for call to function osal_msg_receive
   \                     ??SampleApp_ProcessEvent_1:
   \   000026   90....       MOV     DPTR,#SampleApp_TaskID
   \   000029   E0           MOVX    A,@DPTR
   \   00002A   F9           MOV     R1,A
   \   00002B   12....       LCALL   ??osal_msg_receive?relay
   \   00002E   8A..         MOV     ?V0 + 0,R2
   \   000030   8B..         MOV     ?V0 + 1,R3
   \   000032   E5..         MOV     A,?V0 + 0
   \   000034   45..         ORL     A,?V0 + 1
   \   000036   7003         JNZ     $+5
   \   000038   02....       LJMP    ??SampleApp_ProcessEvent_5 & 0xFFFF
   \   00003B   85..82       MOV     DPL,?V0 + 0
   \   00003E   85..83       MOV     DPH,?V0 + 1
   \   000041   E0           MOVX    A,@DPTR
   \   000042   24E6         ADD     A,#-0x1a
   \   000044   6068         JZ      ??SampleApp_ProcessEvent_6
   \   000046   2449         ADD     A,#0x49
   \   000048   6006         JZ      ??SampleApp_ProcessEvent_7
   \   00004A   24D4         ADD     A,#-0x2c
   \   00004C   606A         JZ      ??SampleApp_ProcessEvent_8
   \   00004E   80CF         SJMP    ??SampleApp_ProcessEvent_4
   \                     ??SampleApp_ProcessEvent_7:
   \   000050   A3           INC     DPTR
   \   000051   E0           MOVX    A,@DPTR
   \   000052   90....       MOV     DPTR,#SampleApp_NwkState
   \   000055   F0           MOVX    @DPTR,A
   \   000056   6401         XRL     A,#0x1
   \   000058   700D         JNZ     ??SampleApp_ProcessEvent_9
   \   00005A                ; Setup parameters for call to function HalUARTWrite
   \   00005A   7C04         MOV     R4,#0x4
   \   00005C   7D00         MOV     R5,#0x0
   \   00005E   7A..         MOV     R2,#`?<Constant "init">` & 0xff
   \   000060   7B..         MOV     R3,#(`?<Constant "init">` >> 8) & 0xff
   \   000062   7900         MOV     R1,#0x0
   \   000064   12....       LCALL   ??HalUARTWrite?relay
   \                     ??SampleApp_ProcessEvent_9:
   \   000067   90....       MOV     DPTR,#SampleApp_NwkState
   \   00006A   E0           MOVX    A,@DPTR
   \   00006B   6402         XRL     A,#0x2
   \   00006D   7023         JNZ     ??SampleApp_ProcessEvent_10
   \   00006F                ; Setup parameters for call to function HalUARTWrite
   \   00006F   7C04         MOV     R4,#0x4
   \   000071   7D00         MOV     R5,#0x0
   \   000073   7A..         MOV     R2,#`?<Constant "disc">` & 0xff
   \   000075   7B..         MOV     R3,#(`?<Constant "disc">` >> 8) & 0xff
   \   000077   7900         MOV     R1,#0x0
   \   000079   12....       LCALL   ??HalUARTWrite?relay
   \   00007C   90....       MOV     DPTR,#reset_flag
   \   00007F   E0           MOVX    A,@DPTR
   \   000080   04           INC     A
   \   000081   F0           MOVX    @DPTR,A
   \   000082   6428         XRL     A,#0x28
   \   000084   700C         JNZ     ??SampleApp_ProcessEvent_10
   \   000086                ; Setup parameters for call to function osal_set_event
   \   000086   7A02         MOV     R2,#0x2
   \   000088   7B00         MOV     R3,#0x0
   \   00008A   90....       MOV     DPTR,#SampleApp_TaskID
   \   00008D   E0           MOVX    A,@DPTR
   \   00008E   F9           MOV     R1,A
   \   00008F   12....       LCALL   ??osal_set_event?relay
   \                     ??SampleApp_ProcessEvent_10:
   \   000092   90....       MOV     DPTR,#SampleApp_NwkState
   \   000095   E0           MOVX    A,@DPTR
   \   000096   6406         XRL     A,#0x6
   \   000098   6005         JZ      ??SampleApp_ProcessEvent_11
   \   00009A   E0           MOVX    A,@DPTR
   \   00009B   6407         XRL     A,#0x7
   \   00009D   7080         JNZ     ??SampleApp_ProcessEvent_4
   \                     ??SampleApp_ProcessEvent_11:
   \   00009F                ; Setup parameters for call to function osal_set_event
   \   00009F   7A01         MOV     R2,#0x1
   \   0000A1   7B00         MOV     R3,#0x0
   \   0000A3   90....       MOV     DPTR,#SampleApp_TaskID
   \   0000A6   E0           MOVX    A,@DPTR
   \   0000A7   F9           MOV     R1,A
   \   0000A8   12....       LCALL   ??osal_set_event?relay
   \   0000AB   02....       LJMP    ??SampleApp_ProcessEvent_4 & 0xFFFF
   \                     ??SampleApp_ProcessEvent_6:
   \   0000AE                ; Setup parameters for call to function SampleApp_MessageMSGCB
   \   0000AE   AA..         MOV     R2,?V0 + 0
   \   0000B0   AB..         MOV     R3,?V0 + 1
   \   0000B2   12....       LCALL   ??SampleApp_MessageMSGCB?relay
   \   0000B5   02....       LJMP    ??SampleApp_ProcessEvent_4 & 0xFFFF
   \                     ??SampleApp_ProcessEvent_8:
   \   0000B8   A3           INC     DPTR
   \   0000B9   E0           MOVX    A,@DPTR
   \   0000BA   7003         JNZ     $+5
   \   0000BC   02....       LJMP    ??SampleApp_ProcessEvent_2 & 0xFFFF
   \   0000BF                ; Setup parameters for call to function HalUARTWrite
   \   0000BF   7C06         MOV     R4,#0x6
   \   0000C1   7D00         MOV     R5,#0x0
   \   0000C3   7A..         MOV     R2,#`?<Constant "not ok">` & 0xff
   \   0000C5   7B..         MOV     R3,#(`?<Constant "not ok">` >> 8) & 0xff
   \   0000C7   02....       LJMP    ??SampleApp_ProcessEvent_3 & 0xFFFF
    286              }
    287              // 释放事件
    288              return (events ^ SYS_EVENT_MSG);
   \                     ??SampleApp_ProcessEvent_5:
   \   0000CA   EE           MOV     A,R6
   \   0000CB   FA           MOV     R2,A
   \   0000CC   EF           MOV     A,R7
   \   0000CD   6480         XRL     A,#0x80
   \                     ??SampleApp_ProcessEvent_12:
   \   0000CF   FB           MOV     R3,A
   \   0000D0   8057         SJMP    ??SampleApp_ProcessEvent_13
    289            }
    290            if(events & RESET_EVENT)//重启事件（入网失败时重启）
   \                     ??SampleApp_ProcessEvent_0:
   \   0000D2   EE           MOV     A,R6
   \   0000D3   5402         ANL     A,#0x2
   \   0000D5   601F         JZ      ??SampleApp_ProcessEvent_14
    291            {   
    292              if(SampleApp_NwkState==DEV_INIT||SampleApp_NwkState==DEV_NWK_DISC){
   \   0000D7   90....       MOV     DPTR,#SampleApp_NwkState
   \   0000DA   E0           MOVX    A,@DPTR
   \   0000DB   6401         XRL     A,#0x1
   \   0000DD   6005         JZ      ??SampleApp_ProcessEvent_15
   \   0000DF   E0           MOVX    A,@DPTR
   \   0000E0   6402         XRL     A,#0x2
   \   0000E2   700C         JNZ     ??SampleApp_ProcessEvent_16
    293                reset_flag=0;
    294                SystemReset();
   \                     ??SampleApp_ProcessEvent_15:
   \   0000E4   C2AF         CLR     0xa8.7
   \   0000E6   C2AF         CLR     0xa8.7
   \   0000E8   75C9AB       MOV     0xc9,#-0x55
   \   0000EB   75C95B       MOV     0xc9,#0x5b
   \                     ??SampleApp_ProcessEvent_17:
   \   0000EE   80FE         SJMP    ??SampleApp_ProcessEvent_17
    295              }
    296              else{
    297                return (events ^ RESET_EVENT);//释放重启事件
   \                     ??SampleApp_ProcessEvent_16:
   \   0000F0   EE           MOV     A,R6
   \   0000F1   6402         XRL     A,#0x2
   \   0000F3   FA           MOV     R2,A
   \   0000F4   8033         SJMP    ??SampleApp_ProcessEvent_13
    298              }
    299            }
    300           
    301            if(events & SEND_DATA_EVENT)
   \                     ??SampleApp_ProcessEvent_14:
   \   0000F6   EE           MOV     A,R6
   \   0000F7   A2E0         MOV     C,0xE0 /* A   */.0
   \   0000F9   501A         JNC     ??SampleApp_ProcessEvent_18
    302            {
    303              ShowInfo();
   \   0000FB                ; Setup parameters for call to function ShowInfo
   \   0000FB   12....       LCALL   ??ShowInfo?relay
    304              osal_start_timerEx( SampleApp_TaskID, SEND_DATA_EVENT,(3000 + (osal_rand() & 0x00FF)) );
   \   0000FE                ; Setup parameters for call to function osal_rand
   \   0000FE   12....       LCALL   ??osal_rand?relay
   \   000101                ; Setup parameters for call to function osal_start_timerEx
   \   000101   EA           MOV     A,R2
   \   000102   24B8         ADD     A,#-0x48
   \   000104   FC           MOV     R4,A
   \   000105   E4           CLR     A
   \   000106   340B         ADDC    A,#0xb
   \   000108   FD           MOV     R5,A
   \   000109   7A01         MOV     R2,#0x1
   \   00010B   12....       LCALL   ??Subroutine17_0 & 0xFFFF
    305              //osal_start_timerEx(SampleApp_TaskID,SEND_DATA_EVENT,3000);//定时函数，2000ms
    306              return (events ^ SEND_DATA_EVENT);
   \                     ??CrossCallReturnLabel_36:
   \   00010E   EE           MOV     A,R6
   \   00010F   6401         XRL     A,#0x1
   \   000111   FA           MOV     R2,A
   \   000112   EF           MOV     A,R7
   \   000113   80BA         SJMP    ??SampleApp_ProcessEvent_12
    307            }
    308            
    309            if(events & SAMPLEAPP_RESET_EVT)//常规重启事件
   \                     ??SampleApp_ProcessEvent_18:
   \   000115   540F         ANL     A,#0xf
   \   000117   600C         JZ      ??SampleApp_ProcessEvent_19
    310            {
    311              SystemReset();
   \   000119   C2AF         CLR     0xa8.7
   \   00011B   C2AF         CLR     0xa8.7
   \   00011D   75C9AB       MOV     0xc9,#-0x55
   \   000120   75C95B       MOV     0xc9,#0x5b
   \                     ??SampleApp_ProcessEvent_20:
   \   000123   80FE         SJMP    ??SampleApp_ProcessEvent_20
    312            }
    313            
    314            return 0;
   \                     ??SampleApp_ProcessEvent_19:
   \   000125   7A00         MOV     R2,#0x0
   \   000127   7B00         MOV     R3,#0x0
   \                     ??SampleApp_ProcessEvent_13:
   \   000129   7F04         MOV     R7,#0x4
   \   00012B   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   00012E                REQUIRE _A_IEN0
   \   00012E                REQUIRE WDCTL
    315          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine17_0:
   \   000000   7B00         MOV     R3,#0x0
   \   000002   90....       MOV     DPTR,#SampleApp_TaskID
   \   000005   E0           MOVX    A,@DPTR
   \   000006   F9           MOV     R1,A
   \   000007   12....       LCALL   ??osal_start_timerEx?relay
   \   00000A   22           RET
    316          
    317          
    318          /*********************************************************************
    319           * LOCAL FUNCTIONS
    320           */
    321          /*********************************************************************
    322           * @fn      Uart_Read
    323           *
    324           * @brief   解析串口数据
    325           *
    326           * @param   
    327           *
    328           * @return  none
    329           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    330          void Uart_Read(uint8 port, uint8 event)
   \                     Uart_Read:
    331          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 40
   \   000005   74D8         MOV     A,#-0x28
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    332          	uint8  ch,check_temp;
    333          	uart_rdlenrightflag=0;          
   \                     ??Uart_Read_0:
   \   00000A   90....       MOV     DPTR,#uart_rdlenrightflag
   \   00000D   E4           CLR     A
   \   00000E   F0           MOVX    @DPTR,A
    334          	uart_rdsuccessflag=0;           
   \   00000F   90....       MOV     DPTR,#uart_rdsuccessflag
   \                     ??Uart_Read_1:
   \   000012   F0           MOVX    @DPTR,A
    335          	uart_rd_enableflag=0;           
   \   000013   90....       MOV     DPTR,#uart_rd_enableflag
   \   000016   F0           MOVX    @DPTR,A
    336          	uart_rdlen=0;               
   \   000017   90....       MOV     DPTR,#uart_rdlen
   \   00001A   F0           MOVX    @DPTR,A
    337          	uart_rdlentemp=0;
   \   00001B   90....       MOV     DPTR,#uart_rdlentemp
   \   00001E   8008         SJMP    ??Uart_Read_2
    338                  
    339                  uint8 mychannel;
    340                  uint8 PAN[2];
    341                  uint8 SHORT[2];
    342                  //uint16 shorttemp;
    343                  //uint8 brodata[4];
    344          
    345            while (Hal_UART_RxBufLen(0)){
    346                  HalUARTRead(0,&ch,1);
    347                  if(ch==0xac){
    348                          uart_rd_enableflag=1;
   \                     ??Uart_Read_3:
   \   000020   7401         MOV     A,#0x1
   \                     ??Uart_Read_4:
   \   000022   F0           MOVX    @DPTR,A
    349                          uart_rdlentemp++;
   \   000023   90....       MOV     DPTR,#uart_rdlentemp
   \   000026   E0           MOVX    A,@DPTR
   \   000027   04           INC     A
   \                     ??Uart_Read_2:
   \   000028   F0           MOVX    @DPTR,A
    350                  }
   \   000029                ; Setup parameters for call to function Hal_UART_RxBufLen
   \   000029   7900         MOV     R1,#0x0
   \   00002B   12....       LCALL   ??Hal_UART_RxBufLen?relay
   \   00002E   8B..         MOV     ?V0 + 1,R3
   \   000030   EA           MOV     A,R2
   \   000031   45..         ORL     A,?V0 + 1
   \   000033   7003         JNZ     $+5
   \   000035   02....       LJMP    ??Uart_Read_5 & 0xFFFF
   \   000038                ; Setup parameters for call to function HalUARTRead
   \   000038   7C01         MOV     R4,#0x1
   \   00003A   7D00         MOV     R5,#0x0
   \   00003C   85..82       MOV     DPL,?XSP + 0
   \   00003F   85..83       MOV     DPH,?XSP + 1
   \   000042   AA82         MOV     R2,DPL
   \   000044   AB83         MOV     R3,DPH
   \   000046   7900         MOV     R1,#0x0
   \   000048   12....       LCALL   ??HalUARTRead?relay
   \   00004B   85..82       MOV     DPL,?XSP + 0
   \   00004E   85..83       MOV     DPH,?XSP + 1
   \   000051   E0           MOVX    A,@DPTR
   \   000052   64AC         XRL     A,#0xac
   \   000054   90....       MOV     DPTR,#uart_rd_enableflag
   \   000057   60C7         JZ      ??Uart_Read_3
    351          	else if(uart_rd_enableflag==1&&uart_rdlentemp==1){
   \   000059   E0           MOVX    A,@DPTR
   \   00005A   6401         XRL     A,#0x1
   \   00005C   6003         JZ      $+5
   \   00005E   02....       LJMP    ??Uart_Read_6 & 0xFFFF
   \   000061   90....       MOV     DPTR,#uart_rdlentemp
   \   000064   E0           MOVX    A,@DPTR
   \   000065   6401         XRL     A,#0x1
   \   000067   7012         JNZ     ??Uart_Read_7
    352          		uart_rdlen=ch;
   \   000069   85..82       MOV     DPL,?XSP + 0
   \   00006C   85..83       MOV     DPH,?XSP + 1
   \   00006F   E0           MOVX    A,@DPTR
   \   000070   90....       MOV     DPTR,#uart_rdlen
   \   000073   F0           MOVX    @DPTR,A
    353          		uart_rdlentemp++;
   \   000074   90....       MOV     DPTR,#uart_rdlentemp
   \   000077   7402         MOV     A,#0x2
   \   000079   80AD         SJMP    ??Uart_Read_2
    354          	}
   \                     ??Uart_Read_7:
   \   00007B   E0           MOVX    A,@DPTR
   \   00007C   C3           CLR     C
   \   00007D   9402         SUBB    A,#0x2
   \   00007F   4039         JC      ??Uart_Read_8
   \   000081   90....       MOV     DPTR,#uart_rdlen
   \   000084   E0           MOVX    A,@DPTR
   \   000085   2401         ADD     A,#0x1
   \   000087   F8           MOV     R0,A
   \   000088   E4           CLR     A
   \   000089   3400         ADDC    A,#0x0
   \   00008B   F9           MOV     R1,A
   \   00008C   90....       MOV     DPTR,#uart_rdlentemp
   \   00008F   E0           MOVX    A,@DPTR
   \   000090   FA           MOV     R2,A
   \   000091   E8           MOV     A,R0
   \   000092   9A           SUBB    A,R2
   \   000093   E9           MOV     A,R1
   \   000094   9400         SUBB    A,#0x0
   \   000096   C3           CLR     C
   \   000097   65D0         XRL     A,PSW
   \   000099   33           RLC     A
   \   00009A   401E         JC      ??Uart_Read_8
    355          	else if(uart_rd_enableflag==1&&uart_rdlentemp>=2&&uart_rdlentemp<=uart_rdlen+1){
    356          		uart_rdata[uart_rdlentemp-2]=ch;
   \   00009C   85..82       MOV     DPL,?XSP + 0
   \   00009F   85..83       MOV     DPH,?XSP + 1
   \   0000A2   E0           MOVX    A,@DPTR
   \   0000A3   C0E0         PUSH    A
   \   0000A5   90....       MOV     DPTR,#uart_rdlentemp
   \   0000A8   E0           MOVX    A,@DPTR
   \   0000A9   F8           MOV     R0,A
   \   0000AA   74..         MOV     A,#(uart_rdata + 254) & 0xff
   \   0000AC   28           ADD     A,R0
   \   0000AD   F582         MOV     DPL,A
   \   0000AF   74..         MOV     A,#((uart_rdata - 2) >> 8) & 0xff
   \   0000B1   3400         ADDC    A,#0x0
   \   0000B3   F583         MOV     DPH,A
   \   0000B5   D0E0         POP     A
   \   0000B7   02....       LJMP    ??Uart_Read_4 & 0xFFFF
    357          		uart_rdlentemp++;
    358          	}
   \                     ??Uart_Read_8:
   \   0000BA   E0           MOVX    A,@DPTR
   \   0000BB   FA           MOV     R2,A
   \   0000BC   90....       MOV     DPTR,#uart_rdlen
   \   0000BF   E0           MOVX    A,@DPTR
   \   0000C0   2402         ADD     A,#0x2
   \   0000C2   F8           MOV     R0,A
   \   0000C3   E4           CLR     A
   \   0000C4   3400         ADDC    A,#0x0
   \   0000C6   F9           MOV     R1,A
   \   0000C7   E8           MOV     A,R0
   \   0000C8   6A           XRL     A,R2
   \   0000C9   7001         JNZ     ??Uart_Read_9
   \   0000CB   E9           MOV     A,R1
   \                     ??Uart_Read_9:
   \   0000CC   7019         JNZ     ??Uart_Read_10
    359          	else if(uart_rd_enableflag==1&&uart_rdlentemp==uart_rdlen+2){
    360          		check_temp = ~uart_rdlen;
    361          		if(ch==check_temp){
   \   0000CE   85..82       MOV     DPL,?XSP + 0
   \   0000D1   85..83       MOV     DPH,?XSP + 1
   \   0000D4   E0           MOVX    A,@DPTR
   \   0000D5   F8           MOV     R0,A
   \   0000D6   90....       MOV     DPTR,#uart_rdlen
   \   0000D9   E0           MOVX    A,@DPTR
   \   0000DA   F4           CPL     A
   \   0000DB   68           XRL     A,R0
   \   0000DC   7006         JNZ     ??Uart_Read_11
    362          			uart_rdlenrightflag=1;
   \   0000DE   90....       MOV     DPTR,#uart_rdlenrightflag
   \   0000E1   02....       LJMP    ??Uart_Read_3 & 0xFFFF
    363                                  uart_rdlentemp++;
    364          		}
    365          		else{
    366          			uart_rdlenrightflag=0;          
   \                     ??Uart_Read_11:
   \   0000E4   02....       LJMP    ??Uart_Read_0 & 0xFFFF
    367          			uart_rdsuccessflag=0;           
    368          			uart_rd_enableflag=0;           
    369          			uart_rdlen=0;               
    370          			uart_rdlentemp=0;		
    371          		}
    372                  }
   \                     ??Uart_Read_10:
   \   0000E7   E0           MOVX    A,@DPTR
   \   0000E8   2403         ADD     A,#0x3
   \   0000EA   08           INC     R0
   \   0000EB   E4           CLR     A
   \   0000EC   3400         ADDC    A,#0x0
   \   0000EE   F9           MOV     R1,A
   \   0000EF   E8           MOV     A,R0
   \   0000F0   6A           XRL     A,R2
   \   0000F1   7001         JNZ     ??Uart_Read_12
   \   0000F3   E9           MOV     A,R1
   \                     ??Uart_Read_12:
   \   0000F4   7020         JNZ     ??Uart_Read_6
    373          	else if(uart_rd_enableflag==1&&uart_rdlentemp==uart_rdlen+3){
    374          		if(( ch==0xef )&&( uart_rdlenrightflag==1 )){
   \   0000F6   85..82       MOV     DPL,?XSP + 0
   \   0000F9   85..83       MOV     DPH,?XSP + 1
   \   0000FC   E0           MOVX    A,@DPTR
   \   0000FD   64EF         XRL     A,#0xef
   \   0000FF   70E3         JNZ     ??Uart_Read_11
   \   000101   90....       MOV     DPTR,#uart_rdlenrightflag
   \   000104   E0           MOVX    A,@DPTR
   \   000105   6401         XRL     A,#0x1
   \   000107   70DB         JNZ     ??Uart_Read_11
    375          			uart_rdsuccessflag=1;
   \   000109   90....       MOV     DPTR,#uart_rdsuccessflag
   \   00010C   7401         MOV     A,#0x1
   \   00010E   F0           MOVX    @DPTR,A
    376                                  uart_rdlentemp=0;
   \   00010F   90....       MOV     DPTR,#uart_rdlentemp
   \   000112   E4           CLR     A
   \   000113   02....       LJMP    ??Uart_Read_2 & 0xFFFF
    377          		}
    378          		else{
    379          			uart_rdlenrightflag=0;          
    380          			uart_rdsuccessflag=0;           
    381          			uart_rd_enableflag=0;           
    382          			uart_rdlen=0;               
    383          			uart_rdlentemp=0;
    384          		}
    385          	}
    386                  else{
    387                                   
    388                          uart_rdsuccessflag=0;           
   \                     ??Uart_Read_6:
   \   000116   90....       MOV     DPTR,#uart_rdsuccessflag
   \   000119   E4           CLR     A
   \   00011A   02....       LJMP    ??Uart_Read_1 & 0xFFFF
    389                          uart_rd_enableflag=0;           
    390                          uart_rdlen=0;               
    391                          uart_rdlentemp=0;
    392                  }
    393            }
    394            
    395            if(uart_rdsuccessflag==1){     
   \                     ??Uart_Read_5:
   \   00011D   90....       MOV     DPTR,#uart_rdsuccessflag
   \   000120   E0           MOVX    A,@DPTR
   \   000121   6401         XRL     A,#0x1
   \   000123   6003         JZ      $+5
   \   000125   02....       LJMP    ??Uart_Read_13 & 0xFFFF
    396                  uart_rdsuccessflag=0;
   \   000128   E4           CLR     A
   \   000129   F0           MOVX    @DPTR,A
    397                  afAddrType_t my_DstAddr;
    398                  my_DstAddr.addrMode=(afAddrMode_t)Addr16Bit;
   \   00012A   740F         MOV     A,#0xf
   \   00012C   12....       LCALL   ?XSTACK_DISP0_8
   \   00012F   7402         MOV     A,#0x2
   \   000131   F0           MOVX    @DPTR,A
    399                  my_DstAddr.endPoint=SAMPLEAPP_ENDPOINT;
   \   000132   7410         MOV     A,#0x10
   \   000134   12....       LCALL   ?XSTACK_DISP0_8
   \   000137   7414         MOV     A,#0x14
   \   000139   F0           MOVX    @DPTR,A
    400                  my_DstAddr.addr.shortAddr=0x0000;
   \   00013A   7407         MOV     A,#0x7
   \   00013C   12....       LCALL   ?XSTACK_DISP0_8
   \   00013F   E4           CLR     A
   \   000140   F0           MOVX    @DPTR,A
   \   000141   A3           INC     DPTR
   \   000142   F0           MOVX    @DPTR,A
    401                  
    402                  RFTX rftx;
    403          	uint16 nwk;
    404          	nwk=NLME_GetShortAddr();
   \   000143                ; Setup parameters for call to function NLME_GetShortAddr
   \   000143   12....       LCALL   ??NLME_GetShortAddr?relay
   \   000146   7401         MOV     A,#0x1
   \   000148   12....       LCALL   ?XSTACK_DISP0_8
   \   00014B   12....       LCALL   ?Subroutine4 & 0xFFFF
    405          	To_string(rftx.myNWK,(uint8 *)&nwk,2);
                 	                     ^
Warning[Pe167]: argument of type "unsigned char *" is incompatible with
          parameter of type "char *"
   \                     ??CrossCallReturnLabel_3:
   \   00014E   7401         MOV     A,#0x1
   \   000150   12....       LCALL   ?XSTACK_DISP0_8
   \   000153   AC82         MOV     R4,DPL
   \   000155   AD83         MOV     R5,DPH
   \   000157   7416         MOV     A,#0x16
   \   000159   12....       LCALL   ?XSTACK_DISP0_8
   \   00015C   AA82         MOV     R2,DPL
   \   00015E   AB83         MOV     R3,DPH
   \   000160   12....       LCALL   ??To_string?relay
    406                  To_string(rftx.myMAC,NLME_GetExtAddr(),8);
                                              ^
Warning[Pe167]: argument of type "unsigned char *" is incompatible with
          parameter of type "char *"
   \   000163                ; Setup parameters for call to function To_string
   \   000163                ; Setup parameters for call to function NLME_GetExtAddr
   \   000163   12....       LCALL   ??NLME_GetExtAddr?relay
   \   000166   EA           MOV     A,R2
   \   000167   FC           MOV     R4,A
   \   000168   EB           MOV     A,R3
   \   000169   FD           MOV     R5,A
   \   00016A   7408         MOV     A,#0x8
   \   00016C   F9           MOV     R1,A
   \   00016D   7418         MOV     A,#0x18
   \   00016F   12....       LCALL   ?XSTACK_DISP0_8
   \   000172   AA82         MOV     R2,DPL
   \   000174   AB83         MOV     R3,DPH
   \   000176   12....       LCALL   ??To_string?relay
    407                  
    408                  //自定协议 AC LEN CMD DATA ~LEN EF
    409                   
    410          /************************************************************************************
    411          #define SEND_PANID                  0xFA  //读取PANID
    412          #define SEND_CHANNEL                0xFB  //读取信道
    413          #define SEND_SHORTADDR              0xFC  //读取短地址
    414          #define SEND_MACADDR                0xFD  //读取MAC地址
    415          #define SEND_DEVTYPE                0xFE  //读取设备类型
    416          #define SEND_NWKSTD                 0xFF  //读取网络状态
    417                  
    418          #define SEND_DATA                   0xF1  //外发数据(协调器为广播，节点为点播至协调器)
    419          #define SEND_DATA_P2P               0xF2  //点播数据(协调器专有)
    420          
    421          #define CHANGE_PANID                0xE1  //更改PANID
    422          #define CHANGE_CHANNEL              0xE2  //更改信道
    423            
    424          #define CNTDEVNUM                   0xD1  //统计入网设备数量(暂未实现)
    425          #define SEND_BACK                   0xD2  //打开(协调器接收数据回传到发送端）
    426          #define SEND_BACK_CANCEL            0xD3  //关闭(协调器接收数据回传到发送端）
    427                  
    428          #define SEND_RESET                  0xDF  //复位
    429          ************************************************************************************/  
    430                  
    431               switch(uart_rdata[0]){     
   \   000179   90....       MOV     DPTR,#uart_rdata
   \   00017C   E0           MOVX    A,@DPTR
   \   00017D   2421         ADD     A,#0x21
   \   00017F   7003         JNZ     $+5
   \   000181   02....       LJMP    ??Uart_Read_14 & 0xFFFF
   \   000184   24FE         ADD     A,#-0x2
   \   000186   7003         JNZ     $+5
   \   000188   02....       LJMP    ??Uart_Read_15 & 0xFFFF
   \   00018B   14           DEC     A
   \   00018C   7003         JNZ     $+5
   \   00018E   02....       LJMP    ??Uart_Read_16 & 0xFFFF
   \   000191   24F1         ADD     A,#-0xf
   \   000193   7003         JNZ     $+5
   \   000195   02....       LJMP    ??Uart_Read_17 & 0xFFFF
   \   000198   24F7         ADD     A,#-0x9
   \   00019A   601D         JZ      ??Uart_Read_18
   \   00019C   14           DEC     A
   \   00019D   6071         JZ      ??Uart_Read_19
   \   00019F   14           DEC     A
   \   0001A0   7003         JNZ     $+5
   \   0001A2   02....       LJMP    ??Uart_Read_20 & 0xFFFF
   \   0001A5   14           DEC     A
   \   0001A6   7003         JNZ     $+5
   \   0001A8   02....       LJMP    ??Uart_Read_21 & 0xFFFF
   \   0001AB   14           DEC     A
   \   0001AC   7003         JNZ     $+5
   \   0001AE   02....       LJMP    ??Uart_Read_22 & 0xFFFF
   \   0001B1   14           DEC     A
   \   0001B2   7003         JNZ     $+5
   \   0001B4   02....       LJMP    ??Uart_Read_23 & 0xFFFF
   \   0001B7   8052         SJMP    ??Uart_Read_13
    432          /**********************************************************************************
    433           *****************************读取设备信息*****************************************
    434                      
    435                     SEND_PANID                  0xFA  //读取PANID
    436                     SEND_CHANNEL                0xFB  //读取信道
    437                     SEND_SHORTADDR              0xFC  //读取短地址
    438                     SEND_MACADDR                0xFD  //读取MAC地址
    439                     SEND_DEVTYPE                0xFE  //读取设备类型
    440                     SEND_NWKSTD                 0xFF  //读取网络状态
    441                      
    442           *****************  UART back data: 0xac len cmd * ~len 0xef   ********************
    443           **********************************************************************************
    444          */ 
    445                    case SEND_PANID:
    446                          osal_memcpy(&mypanid,&_NIB.nwkPanId,sizeof(uint16));
   \                     ??Uart_Read_18:
   \   0001B9                ; Setup parameters for call to function osal_memcpy
   \   0001B9   75....       MOV     ?V0 + 0,#(_NIB + 33) & 0xff
   \   0001BC   75....       MOV     ?V0 + 1,#((_NIB + 33) >> 8) & 0xff
   \   0001BF   75..00       MOV     ?V0 + 2,#0x0
   \   0001C2   78..         MOV     R0,#?V0 + 0
   \   0001C4   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0001C7   7C02         MOV     R4,#0x2
   \   0001C9   7D00         MOV     R5,#0x0
   \   0001CB   7A..         MOV     R2,#mypanid & 0xff
   \   0001CD   7B..         MOV     R3,#(mypanid >> 8) & 0xff
   \   0001CF   12....       LCALL   ??Subroutine19_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_46:
   \   0001D2   12....       LCALL   ?DEALLOC_XSTACK8
    447                          PAN[1]=0xFF&mypanid;
   \   0001D5   90....       MOV     DPTR,#mypanid
   \   0001D8   E0           MOVX    A,@DPTR
   \   0001D9   C0E0         PUSH    A
   \   0001DB   7406         MOV     A,#0x6
   \   0001DD   12....       LCALL   ?XSTACK_DISP0_8
   \   0001E0   D0E0         POP     A
   \   0001E2   F0           MOVX    @DPTR,A
    448                          PAN[0]=0xFF&(mypanid>>8);
   \   0001E3   90....       MOV     DPTR,#mypanid + 1
   \   0001E6   E0           MOVX    A,@DPTR
   \   0001E7   C0E0         PUSH    A
   \   0001E9   7405         MOV     A,#0x5
   \   0001EB   12....       LCALL   ?XSTACK_DISP0_8
   \   0001EE   D0E0         POP     A
   \   0001F0   12....       LCALL   ?Subroutine5 & 0xFFFF
    449                          Uart_Write(0xFA,0,PAN,2);
   \                     ??CrossCallReturnLabel_6:
   \   0001F3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001F6   7407         MOV     A,#0x7
   \   0001F8   12....       LCALL   ?XSTACK_DISP0_8
   \   0001FB   AC82         MOV     R4,DPL
   \   0001FD   AD83         MOV     R5,DPH
   \   0001FF   7A00         MOV     R2,#0x0
   \   000201   79FA         MOV     R1,#-0x6
   \                     ??Uart_Read_24:
   \   000203   12....       LCALL   ??Uart_Write?relay
   \   000206   7402         MOV     A,#0x2
   \   000208   12....       LCALL   ?DEALLOC_XSTACK8
    450                      break;  
    451                      
    452                    case SEND_CHANNEL:
    453                          Uart_Write(0xFB,0,&_NIB.nwkLogicalChannel,1);
    454                      break;  
    455                      
    456                    case SEND_SHORTADDR:
    457                        //osal_memcpy(&shorttemp,&rftx.myNWK,sizeof(uint16));
    458                        SHORT[1]=0xFF&nwk;
    459                        SHORT[0]=0xFF&(nwk>>8);
    460                        Uart_Write(0xFC,0,SHORT,2);
    461                      break;
    462                      
    463                    case SEND_MACADDR:
    464                        Uart_Write(0xFD,0,rftx.myMAC,16);
    465                      break;
    466                      
    467                    case SEND_DEVTYPE:
    468                        if(DEVICE_LOGICAL_TYPE==00){
    469                            Uart_Write(0xFE,0,"COR",3);
    470                        }
    471                        if(DEVICE_LOGICAL_TYPE==01){
    472                            Uart_Write(0xFE,0,"ROU",3);
    473                        }
    474                        if(DEVICE_LOGICAL_TYPE==02){
    475                            Uart_Write(0xFE,0,"END",3);
    476                        }
    477                      break;
    478                    case SEND_NWKSTD:
    479                          if(SampleApp_NwkState==DEV_NWK_DISC){
    480                              Uart_Write(0xFF,0,"discovery",9);
    481                          }
    482                          else if(SampleApp_NwkState==DEV_NWK_JOINING){
    483                              Uart_Write(0xFF,0,"join",4);
    484                          }
    485                          else if(SampleApp_NwkState==DEV_NWK_REJOIN){
    486                              Uart_Write(0xFF,0,"rejoin",6);
    487                          }
    488                          else if(SampleApp_NwkState==DEV_NWK_ORPHAN){
    489                              Uart_Write(0xFF,0,"orphan",6);
    490                          }
    491                          else if(SampleApp_NwkState==DEV_END_DEVICE){
    492                              Uart_Write(0xFF,0,"device online as end",20);
    493                          }
    494                          else if(SampleApp_NwkState==DEV_ROUTER){
    495                              Uart_Write(0xFF,0,"device online as rou",20);
    496                          }
    497                          else if(SampleApp_NwkState==DEV_COORD_STARTING){
    498                              Uart_Write(0xFF,0,"bulid net",9);
    499                          }
    500                          else if(SampleApp_NwkState==DEV_ZB_COORD){
    501                              Uart_Write(0xFF,0,"net ready",9);
    502                          }
    503                      break;
    504          /**********************************************************************************
    505           *****************************发送数据命令*****************************************
    506                      
    507                      SEND_DATA                   0xF1  //外发数据(协调器为广播，节点为点播至协调器)
    508                      SEND_DATA_P2P               0xF2  //点播数据(协调器专有)
    509                      
    510           *****************  UART back data: 0xac len cmd * ~len 0xef   ********************
    511           **********************************************************************************
    512          */  
    513                    case SEND_DATA: 
    514                      
    515                        AF_DataRequest(&my_DstAddr,
    516                             &SampleApp_epDesc,
    517                             SAMPLEAPP_CLUSTERID,
    518                             uart_rdlen-1,
    519                             &uart_rdata[1],
    520                             &SampleApp_TransID,
    521                             AF_ACK_REQUEST,
    522                             AF_DEFAULT_RADIUS);          
    523                        Uart_Write(0xF1,0,&uart_rdata[1],uart_rdlen-1);
    524                      break;
    525          /**********************************************************************************
    526           *****************************更改配置命令*****************************************
    527                      
    528                      CHANGE_PANID                0xE1  //更改PANID
    529                      CHANGE_CHANNEL              0xE2  //更改信道
    530                      
    531           *****************  UART back data: 0xac len cmd * ~len 0xef   ********************
    532           **********************************************************************************
    533          */            
    534                    case CHANGE_PANID:
    535                         mypanid=(uart_rdata[1]<<8) + uart_rdata[2];
    536                         osal_memcpy(&_NIB.nwkPanId,&mypanid,sizeof(uint16));
    537                         NLME_UpdateNV(0x01);
    538                         osal_nv_write(ZCD_NV_PANID, 0, osal_nv_item_len( ZCD_NV_PANID ), &zgConfigPANID);
    539                         //osal_set_event(SampleApp_TaskID,CHANGE_PANID_EVT);
    540                         osal_start_timerEx( SampleApp_TaskID,SAMPLEAPP_RESET_EVT,1000 ); 
    541                      break; 
    542                  case CHANGE_CHANNEL:
    543                          mychannel=uart_rdata[1];
    544                          
    545                          if(mychannel<0x0B||mychannel>0x1A){
    546                              HalUARTWrite(0,"wrong channel",13);
    547                          }
    548                          else{
    549                               _NIB.nwkLogicalChannel = mychannel;
    550                              NLME_UpdateNV(0x01);
    551                              osal_nv_write(ZCD_NV_CHANLIST, 0, osal_nv_item_len( ZCD_NV_CHANLIST ), &zgConfigPANID);
    552                              osal_start_timerEx( SampleApp_TaskID,
    553                                            SAMPLEAPP_RESET_EVT,
    554                                            1000 );
    555                          }
    556                      break;
    557          /**********************************************************************************
    558           *****************************设备相关命令*****************************************
    559                      
    560                      CNTDEVNUM                   0xD1  //统计入网设备数量(*****)
    561                      SEND_BACK                   0xD2  //打开(协调器接收数据回传到发送端）
    562                      SEND_BACK_CANCEL            0xD3  //关闭(协调器接收数据回传到发送端）
    563                      
    564           *****************  UART back data: 0xac len cmd * ~len 0xef   ********************
    565           **********************************************************************************
    566          */                   
    567               
    568                         
    569                         
    570                         
    571          /**********************************************************************************
    572           *****************************复位命令*********************************************
    573                      
    574                      SEND_RESET                  0xDF  //复位
    575                      
    576           *****************  UART back data: 0xac len cmd * ~len 0xef   ********************
    577           **********************************************************************************
    578          */                 
    579                    case SEND_RESET:
    580                          SystemReset();
    581                      break;
    582          
    583                   default:
    584                      break;
    585                  }
    586            }
    587          }
   \                     ??Uart_Read_13:
   \   00020B   7428         MOV     A,#0x28
   \   00020D   02....       LJMP    ?Subroutine1 & 0xFFFF
   \                     ??Uart_Read_19:
   \   000210                ; Setup parameters for call to function Uart_Write
   \   000210   75..01       MOV     ?V0 + 0,#0x1
   \   000213   75..00       MOV     ?V0 + 1,#0x0
   \   000216   78..         MOV     R0,#?V0 + 0
   \   000218   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00021B   7C..         MOV     R4,#(_NIB + 22) & 0xff
   \   00021D   7D..         MOV     R5,#((_NIB + 22) >> 8) & 0xff
   \   00021F   7A00         MOV     R2,#0x0
   \   000221   79FB         MOV     R1,#-0x5
   \   000223   80DE         SJMP    ??Uart_Read_24
   \                     ??Uart_Read_20:
   \   000225   7401         MOV     A,#0x1
   \   000227   12....       LCALL   ?XSTACK_DISP0_8
   \   00022A   E0           MOVX    A,@DPTR
   \   00022B   C0E0         PUSH    A
   \   00022D   7404         MOV     A,#0x4
   \   00022F   12....       LCALL   ?XSTACK_DISP0_8
   \   000232   D0E0         POP     A
   \   000234   F0           MOVX    @DPTR,A
   \   000235   7401         MOV     A,#0x1
   \   000237   12....       LCALL   ?XSTACK_DISP0_8
   \   00023A   A3           INC     DPTR
   \   00023B   E0           MOVX    A,@DPTR
   \   00023C   C0E0         PUSH    A
   \   00023E   7403         MOV     A,#0x3
   \   000240   12....       LCALL   ?XSTACK_DISP0_8
   \   000243   D0E0         POP     A
   \   000245   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_7:
   \   000248   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00024B   7405         MOV     A,#0x5
   \   00024D   12....       LCALL   ?XSTACK_DISP0_8
   \   000250   AC82         MOV     R4,DPL
   \   000252   AD83         MOV     R5,DPH
   \   000254   7A00         MOV     R2,#0x0
   \   000256   79FC         MOV     R1,#-0x4
   \   000258   80A9         SJMP    ??Uart_Read_24
   \                     ??Uart_Read_21:
   \   00025A                ; Setup parameters for call to function Uart_Write
   \   00025A   75..10       MOV     ?V0 + 0,#0x10
   \   00025D   75..00       MOV     ?V0 + 1,#0x0
   \   000260   78..         MOV     R0,#?V0 + 0
   \   000262   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000265   741A         MOV     A,#0x1a
   \   000267   12....       LCALL   ?XSTACK_DISP0_8
   \   00026A   AC82         MOV     R4,DPL
   \   00026C   AD83         MOV     R5,DPH
   \   00026E   7A00         MOV     R2,#0x0
   \   000270   79FD         MOV     R1,#-0x3
   \   000272   808F         SJMP    ??Uart_Read_24
   \                     ??Uart_Read_22:
   \   000274                ; Setup parameters for call to function Uart_Write
   \   000274   75..03       MOV     ?V0 + 0,#0x3
   \   000277   75..00       MOV     ?V0 + 1,#0x0
   \   00027A   78..         MOV     R0,#?V0 + 0
   \   00027C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00027F   7C..         MOV     R4,#`?<Constant "ROU">` & 0xff
   \   000281   7D..         MOV     R5,#(`?<Constant "ROU">` >> 8) & 0xff
   \   000283   7A00         MOV     R2,#0x0
   \   000285   79FE         MOV     R1,#-0x2
   \   000287   02....       LJMP    ??Uart_Read_24 & 0xFFFF
   \                     ??Uart_Read_23:
   \   00028A   90....       MOV     DPTR,#SampleApp_NwkState
   \   00028D   E0           MOVX    A,@DPTR
   \   00028E   6402         XRL     A,#0x2
   \   000290   7016         JNZ     ??Uart_Read_25
   \   000292                ; Setup parameters for call to function Uart_Write
   \   000292   75..09       MOV     ?V0 + 0,#0x9
   \   000295   75..00       MOV     ?V0 + 1,#0x0
   \   000298   78..         MOV     R0,#?V0 + 0
   \   00029A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00029D   7C..         MOV     R4,#`?<Constant "discovery">` & 0xff
   \   00029F   7D..         MOV     R5,#(`?<Constant "discovery">` >> 8) & 0xff
   \                     ??Uart_Read_26:
   \   0002A1   7A00         MOV     R2,#0x0
   \   0002A3   79FF         MOV     R1,#-0x1
   \   0002A5   02....       LJMP    ??Uart_Read_24 & 0xFFFF
   \                     ??Uart_Read_25:
   \   0002A8   E0           MOVX    A,@DPTR
   \   0002A9   6403         XRL     A,#0x3
   \   0002AB   7011         JNZ     ??Uart_Read_27
   \   0002AD                ; Setup parameters for call to function Uart_Write
   \   0002AD   75..04       MOV     ?V0 + 0,#0x4
   \   0002B0   75..00       MOV     ?V0 + 1,#0x0
   \   0002B3   78..         MOV     R0,#?V0 + 0
   \   0002B5   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0002B8   7C..         MOV     R4,#`?<Constant "join">` & 0xff
   \   0002BA   7D..         MOV     R5,#(`?<Constant "join">` >> 8) & 0xff
   \   0002BC   80E3         SJMP    ??Uart_Read_26
   \                     ??Uart_Read_27:
   \   0002BE   E0           MOVX    A,@DPTR
   \   0002BF   6404         XRL     A,#0x4
   \   0002C1   7011         JNZ     ??Uart_Read_28
   \   0002C3                ; Setup parameters for call to function Uart_Write
   \   0002C3   75..06       MOV     ?V0 + 0,#0x6
   \   0002C6   75..00       MOV     ?V0 + 1,#0x0
   \   0002C9   78..         MOV     R0,#?V0 + 0
   \   0002CB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0002CE   7C..         MOV     R4,#`?<Constant "rejoin">` & 0xff
   \   0002D0   7D..         MOV     R5,#(`?<Constant "rejoin">` >> 8) & 0xff
   \   0002D2   80CD         SJMP    ??Uart_Read_26
   \                     ??Uart_Read_28:
   \   0002D4   E0           MOVX    A,@DPTR
   \   0002D5   640A         XRL     A,#0xa
   \   0002D7   7011         JNZ     ??Uart_Read_29
   \   0002D9                ; Setup parameters for call to function Uart_Write
   \   0002D9   75..06       MOV     ?V0 + 0,#0x6
   \   0002DC   75..00       MOV     ?V0 + 1,#0x0
   \   0002DF   78..         MOV     R0,#?V0 + 0
   \   0002E1   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0002E4   7C..         MOV     R4,#`?<Constant "orphan">` & 0xff
   \   0002E6   7D..         MOV     R5,#(`?<Constant "orphan">` >> 8) & 0xff
   \   0002E8   80B7         SJMP    ??Uart_Read_26
   \                     ??Uart_Read_29:
   \   0002EA   E0           MOVX    A,@DPTR
   \   0002EB   6406         XRL     A,#0x6
   \   0002ED   7011         JNZ     ??Uart_Read_30
   \   0002EF                ; Setup parameters for call to function Uart_Write
   \   0002EF   75..14       MOV     ?V0 + 0,#0x14
   \   0002F2   75..00       MOV     ?V0 + 1,#0x0
   \   0002F5   78..         MOV     R0,#?V0 + 0
   \   0002F7   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0002FA   7C..         MOV     R4,#`?<Constant "device online as end">` & 0xff
   \   0002FC   7D..         MOV     R5,#(`?<Constant "device online as end">` >> 8) & 0xff
   \   0002FE   80A1         SJMP    ??Uart_Read_26
   \                     ??Uart_Read_30:
   \   000300   E0           MOVX    A,@DPTR
   \   000301   6407         XRL     A,#0x7
   \   000303   7011         JNZ     ??Uart_Read_31
   \   000305                ; Setup parameters for call to function Uart_Write
   \   000305   75..14       MOV     ?V0 + 0,#0x14
   \   000308   75..00       MOV     ?V0 + 1,#0x0
   \   00030B   78..         MOV     R0,#?V0 + 0
   \   00030D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000310   7C..         MOV     R4,#`?<Constant "device online as rou">` & 0xff
   \   000312   7D..         MOV     R5,#(`?<Constant "device online as rou">` >> 8) & 0xff
   \   000314   808B         SJMP    ??Uart_Read_26
   \                     ??Uart_Read_31:
   \   000316   E0           MOVX    A,@DPTR
   \   000317   6408         XRL     A,#0x8
   \   000319   7012         JNZ     ??Uart_Read_32
   \   00031B                ; Setup parameters for call to function Uart_Write
   \   00031B   75..09       MOV     ?V0 + 0,#0x9
   \   00031E   75..00       MOV     ?V0 + 1,#0x0
   \   000321   78..         MOV     R0,#?V0 + 0
   \   000323   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000326   7C..         MOV     R4,#`?<Constant "bulid net">` & 0xff
   \   000328   7D..         MOV     R5,#(`?<Constant "bulid net">` >> 8) & 0xff
   \   00032A   02....       LJMP    ??Uart_Read_26 & 0xFFFF
   \                     ??Uart_Read_32:
   \   00032D   E0           MOVX    A,@DPTR
   \   00032E   6409         XRL     A,#0x9
   \   000330   6003         JZ      $+5
   \   000332   02....       LJMP    ??Uart_Read_13 & 0xFFFF
   \   000335                ; Setup parameters for call to function Uart_Write
   \   000335   75..09       MOV     ?V0 + 0,#0x9
   \   000338   75..00       MOV     ?V0 + 1,#0x0
   \   00033B   78..         MOV     R0,#?V0 + 0
   \   00033D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000340   7C..         MOV     R4,#`?<Constant "net ready">` & 0xff
   \   000342   7D..         MOV     R5,#(`?<Constant "net ready">` >> 8) & 0xff
   \   000344   02....       LJMP    ??Uart_Read_26 & 0xFFFF
   \                     ??Uart_Read_17:
   \   000347                ; Setup parameters for call to function AF_DataRequest
   \   000347   75..1E       MOV     ?V0 + 0,#0x1e
   \   00034A   78..         MOV     R0,#?V0 + 0
   \   00034C   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00034F   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000352   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000355   78..         MOV     R0,#?V0 + 0
   \   000357   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00035A   75....       MOV     ?V0 + 0,#(uart_rdata + 1) & 0xff
   \   00035D   75....       MOV     ?V0 + 1,#((uart_rdata + 1) >> 8) & 0xff
   \   000360   78..         MOV     R0,#?V0 + 0
   \   000362   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000365   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_8:
   \   000368   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00036B   75..01       MOV     ?V0 + 0,#0x1
   \   00036E   75..00       MOV     ?V0 + 1,#0x0
   \   000371   78..         MOV     R0,#?V0 + 0
   \   000373   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000376   7910         MOV     R1,#0x10
   \   000378   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   00037A   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   00037C   E9           MOV     A,R1
   \   00037D   12....       LCALL   ?XSTACK_DISP0_8
   \   000380   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_29:
   \   000383   12....       LCALL   ?DEALLOC_XSTACK8
   \   000386                ; Setup parameters for call to function Uart_Write
   \   000386   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_9:
   \   000389   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00038C   7C..         MOV     R4,#(uart_rdata + 1) & 0xff
   \   00038E   7D..         MOV     R5,#((uart_rdata + 1) >> 8) & 0xff
   \   000390   7A00         MOV     R2,#0x0
   \   000392   79F1         MOV     R1,#-0xf
   \   000394   02....       LJMP    ??Uart_Read_24 & 0xFFFF
   \                     ??Uart_Read_15:
   \   000397   A3           INC     DPTR
   \   000398   E0           MOVX    A,@DPTR
   \   000399   F8           MOV     R0,A
   \   00039A   E4           CLR     A
   \   00039B   C8           XCH     A,R0
   \   00039C   F9           MOV     R1,A
   \   00039D   A3           INC     DPTR
   \   00039E   E0           MOVX    A,@DPTR
   \   00039F   90....       MOV     DPTR,#mypanid
   \   0003A2   F0           MOVX    @DPTR,A
   \   0003A3   A3           INC     DPTR
   \   0003A4   E9           MOV     A,R1
   \   0003A5   F0           MOVX    @DPTR,A
   \   0003A6                ; Setup parameters for call to function osal_memcpy
   \   0003A6   75....       MOV     ?V0 + 0,#mypanid & 0xff
   \   0003A9   75....       MOV     ?V0 + 1,#(mypanid >> 8) & 0xff
   \   0003AC   88..         MOV     ?V0 + 2,R0
   \   0003AE   78..         MOV     R0,#?V0 + 0
   \   0003B0   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0003B3   7C02         MOV     R4,#0x2
   \   0003B5   7D00         MOV     R5,#0x0
   \   0003B7   7A..         MOV     R2,#(_NIB + 33) & 0xff
   \   0003B9   7B..         MOV     R3,#((_NIB + 33) >> 8) & 0xff
   \   0003BB   12....       LCALL   ??Subroutine19_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_47:
   \   0003BE   12....       LCALL   ?DEALLOC_XSTACK8
   \   0003C1                ; Setup parameters for call to function NLME_UpdateNV
   \   0003C1   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_40:
   \   0003C4   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0003C7                ; Setup parameters for call to function osal_nv_item_len
   \   0003C7   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_48:
   \   0003CA   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0003CD   7C00         MOV     R4,#0x0
   \   0003CF   7D00         MOV     R5,#0x0
   \   0003D1   7A83         MOV     R2,#-0x7d
   \                     ??Uart_Read_33:
   \   0003D3   7B00         MOV     R3,#0x0
   \   0003D5   12....       LCALL   ??osal_nv_write?relay
   \   0003D8   7404         MOV     A,#0x4
   \   0003DA   12....       LCALL   ?DEALLOC_XSTACK8
   \   0003DD                ; Setup parameters for call to function osal_start_timerEx
   \   0003DD   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_33:
   \   0003E0   02....       LJMP    ??Uart_Read_13 & 0xFFFF
   \                     ??Uart_Read_16:
   \   0003E3   A3           INC     DPTR
   \   0003E4   E0           MOVX    A,@DPTR
   \   0003E5   F8           MOV     R0,A
   \   0003E6   74F5         MOV     A,#-0xb
   \   0003E8   28           ADD     A,R0
   \   0003E9   C3           CLR     C
   \   0003EA   9410         SUBB    A,#0x10
   \   0003EC   4010         JC      ??Uart_Read_34
   \   0003EE                ; Setup parameters for call to function HalUARTWrite
   \   0003EE   7C0D         MOV     R4,#0xd
   \   0003F0   7D00         MOV     R5,#0x0
   \   0003F2   7A..         MOV     R2,#`?<Constant "wrong channel">` & 0xff
   \   0003F4   7B..         MOV     R3,#(`?<Constant "wrong channel">` >> 8) & 0xff
   \   0003F6   7900         MOV     R1,#0x0
   \   0003F8   12....       LCALL   ??HalUARTWrite?relay
   \   0003FB   02....       LJMP    ??Uart_Read_13 & 0xFFFF
   \                     ??Uart_Read_34:
   \   0003FE   E8           MOV     A,R0
   \   0003FF   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_37:
   \   000402   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000405                ; Setup parameters for call to function osal_nv_item_len
   \   000405   7A84         MOV     R2,#-0x7c
   \   000407   12....       LCALL   ??Subroutine20_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_50:
   \   00040A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00040D   7C00         MOV     R4,#0x0
   \   00040F   7D00         MOV     R5,#0x0
   \   000411   7A84         MOV     R2,#-0x7c
   \   000413   80BE         SJMP    ??Uart_Read_33
   \                     ??Uart_Read_14:
   \   000415   C2AF         CLR     0xa8.7
   \   000417   C2AF         CLR     0xa8.7
   \   000419   75C9AB       MOV     0xc9,#-0x55
   \   00041C   75C95B       MOV     0xc9,#0x5b
   \                     ??Uart_Read_35:
   \   00041F   80FE         SJMP    ??Uart_Read_35
   \   000421                REQUIRE _A_IEN0
   \   000421                REQUIRE WDCTL

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   7CE8         MOV     R4,#-0x18
   \   000002   7D03         MOV     R5,#0x3
   \   000004   7A0F         MOV     R2,#0xf
   \   000006                REQUIRE ??Subroutine17_0
   \   000006                ; // Fall through to label ??Subroutine17_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   90....       MOV     DPTR,#uart_rdlen
   \   000003   E0           MOVX    A,@DPTR
   \   000004   24FF         ADD     A,#-0x1
   \   000006   F5..         MOV     ?V0 + 0,A
   \   000008   E4           CLR     A
   \   000009   34FF         ADDC    A,#-0x1
   \   00000B   F5..         MOV     ?V0 + 1,A
   \   00000D   78..         MOV     R0,#?V0 + 0
   \   00000F   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   F0           MOVX    @DPTR,A
   \   000001                ; Setup parameters for call to function Uart_Write
   \   000001                ; Setup parameters for call to function Uart_Write
   \   000001   75..02       MOV     ?V0 + 0,#0x2
   \   000004   75..00       MOV     ?V0 + 1,#0x0
   \   000007   78..         MOV     R0,#?V0 + 0
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   90....       MOV     DPTR,#_NIB + 22
   \   000003                REQUIRE ??Subroutine18_0
   \   000003                ; // Fall through to label ??Subroutine18_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine18_0:
   \   000000   F0           MOVX    @DPTR,A
   \   000001                ; Setup parameters for call to function NLME_UpdateNV
   \   000001                ; Setup parameters for call to function NLME_UpdateNV
   \   000001                ; Setup parameters for call to function NLME_UpdateNV
   \   000001   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_41:
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine16:
   \   000000   7901         MOV     R1,#0x1
   \   000002   12....       LCALL   ??NLME_UpdateNV?relay
   \   000005                ; Setup parameters for call to function osal_nv_write
   \   000005                ; Setup parameters for call to function osal_nv_write
   \   000005                ; Setup parameters for call to function osal_nv_write
   \   000005                ; Setup parameters for call to function osal_nv_write
   \   000005   75....       MOV     ?V0 + 0,#zgConfigPANID & 0xff
   \   000008   75....       MOV     ?V0 + 1,#(zgConfigPANID >> 8) & 0xff
   \   00000B   78..         MOV     R0,#?V0 + 0
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine14:
   \   000000   AA82         MOV     R2,DPL
   \   000002   AB83         MOV     R3,DPH
   \   000004   12....       LCALL   ??AF_DataRequest?relay
   \   000007   7409         MOV     A,#0x9
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine19_0:
   \   000000   12....       LCALL   ??osal_memcpy?relay
   \   000003   7403         MOV     A,#0x3
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   EA           MOV     A,R2
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   EB           MOV     A,R3
   \   000004   F0           MOVX    @DPTR,A
   \   000005                ; Setup parameters for call to function To_string
   \   000005                ; Setup parameters for call to function To_string
   \   000005                ; Setup parameters for call to function To_string
   \   000005   7902         MOV     R1,#0x2
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003   7F03         MOV     R7,#0x3
   \   000005   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine15:
   \   000000   7A83         MOV     R2,#-0x7d
   \   000002                REQUIRE ??Subroutine20_0
   \   000002                ; // Fall through to label ??Subroutine20_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine20_0:
   \   000000   7B00         MOV     R3,#0x0
   \   000002   12....       LCALL   ??osal_nv_item_len?relay
   \   000005   8A..         MOV     ?V0 + 0,R2
   \   000007   8B..         MOV     ?V0 + 1,R3
   \   000009   78..         MOV     R0,#?V0 + 0
   \   00000B   22           RET
    588          /*********************************************************************
    589           * @fn      Uart_Write
    590           *
    591           * @brief   AC LEN CMD&DATA ~LEN EF
    592           *
    593          * @param   cmd:控制指令，port:串口，buf:串口待发送buf，len:有效数据长度（待发送数据） 
    594           *
    595           * @return  none
    596           */
    597          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    598          void Uart_Write(uint8 cmd,uint8 port,uint8 *buf, uint16 len)
   \                     Uart_Write:
    599          {   
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 256
   \   000005   758200       MOV     DPL,#0x0
   \   000008   7583FF       MOV     DPH,#-0x1
   \   00000B   12....       LCALL   ?ADD_XSTACK_DISP0_16
   \   00000E   E9           MOV     A,R1
   \   00000F   FF           MOV     R7,A
   \   000010   EA           MOV     A,R2
   \   000011   FE           MOV     R6,A
   \   000012   758209       MOV     DPL,#0x9
   \   000015   758301       MOV     DPH,#0x1
   \   000018   12....       LCALL   ?XSTACK_DISP0_16
   \   00001B   E0           MOVX    A,@DPTR
   \   00001C   F8           MOV     R0,A
   \   00001D   A3           INC     DPTR
   \   00001E   E0           MOVX    A,@DPTR
   \   00001F   F9           MOV     R1,A
    600              uint8 uartbuf[256];
    601              uartbuf[0]=0xac; 
   \   000020   85..82       MOV     DPL,?XSP + 0
   \   000023   85..83       MOV     DPH,?XSP + 1
   \   000026   74AC         MOV     A,#-0x54
   \   000028   F0           MOVX    @DPTR,A
    602              uartbuf[1]=len+1;
   \   000029   E8           MOV     A,R0
   \   00002A   04           INC     A
   \   00002B   C0E0         PUSH    A
   \   00002D   7401         MOV     A,#0x1
   \   00002F   12....       LCALL   ?XSTACK_DISP0_8
   \   000032   D0E0         POP     A
   \   000034   F0           MOVX    @DPTR,A
    603              uartbuf[2]=cmd;
   \   000035   7402         MOV     A,#0x2
   \   000037   12....       LCALL   ?XSTACK_DISP0_8
   \   00003A   EF           MOV     A,R7
   \   00003B   F0           MOVX    @DPTR,A
    604              int i;
    605              for(i=0;i<len;i++){
   \   00003C   7A00         MOV     R2,#0x0
   \   00003E   7B00         MOV     R3,#0x0
   \   000040   8029         SJMP    ??Uart_Write_0
    606                uartbuf[i+3]=buf[i];
   \                     ??Uart_Write_1:
   \   000042   EC           MOV     A,R4
   \   000043   2A           ADD     A,R2
   \   000044   F582         MOV     DPL,A
   \   000046   ED           MOV     A,R5
   \   000047   3B           ADDC    A,R3
   \   000048   F583         MOV     DPH,A
   \   00004A   E0           MOVX    A,@DPTR
   \   00004B   C0E0         PUSH    A
   \   00004D   85..82       MOV     DPL,?XSP + 0
   \   000050   85..83       MOV     DPH,?XSP + 1
   \   000053   E582         MOV     A,DPL
   \   000055   2A           ADD     A,R2
   \   000056   F582         MOV     DPL,A
   \   000058   E583         MOV     A,DPH
   \   00005A   3B           ADDC    A,R3
   \   00005B   F583         MOV     DPH,A
   \   00005D   A3           INC     DPTR
   \   00005E   A3           INC     DPTR
   \   00005F   A3           INC     DPTR
   \   000060   D0E0         POP     A
   \   000062   F0           MOVX    @DPTR,A
    607              }
   \   000063   EA           MOV     A,R2
   \   000064   2401         ADD     A,#0x1
   \   000066   0A           INC     R2
   \   000067   EB           MOV     A,R3
   \   000068   3400         ADDC    A,#0x0
   \   00006A   FB           MOV     R3,A
   \                     ??Uart_Write_0:
   \   00006B   C3           CLR     C
   \   00006C   EA           MOV     A,R2
   \   00006D   98           SUBB    A,R0
   \   00006E   EB           MOV     A,R3
   \   00006F   99           SUBB    A,R1
   \   000070   40D0         JC      ??Uart_Write_1
    608              uartbuf[len+3]=~uartbuf[1];
   \   000072   85..82       MOV     DPL,?XSP + 0
   \   000075   85..83       MOV     DPH,?XSP + 1
   \   000078   E582         MOV     A,DPL
   \   00007A   28           ADD     A,R0
   \   00007B   FA           MOV     R2,A
   \   00007C   E583         MOV     A,DPH
   \   00007E   39           ADDC    A,R1
   \   00007F   FB           MOV     R3,A
   \   000080   7401         MOV     A,#0x1
   \   000082   12....       LCALL   ?XSTACK_DISP0_8
   \   000085   E0           MOVX    A,@DPTR
   \   000086   F4           CPL     A
   \   000087   8A82         MOV     DPL,R2
   \   000089   8B83         MOV     DPH,R3
   \   00008B   A3           INC     DPTR
   \   00008C   A3           INC     DPTR
   \   00008D   A3           INC     DPTR
   \   00008E   F0           MOVX    @DPTR,A
    609              uartbuf[len+4]=0xef;   
   \   00008F   8A82         MOV     DPL,R2
   \   000091   8B83         MOV     DPH,R3
   \   000093   A3           INC     DPTR
   \   000094   A3           INC     DPTR
   \   000095   A3           INC     DPTR
   \   000096   A3           INC     DPTR
   \   000097   74EF         MOV     A,#-0x11
   \   000099   F0           MOVX    @DPTR,A
    610              HalUARTWrite(port,&uartbuf[0],len+5);
   \   00009A                ; Setup parameters for call to function HalUARTWrite
   \   00009A   E8           MOV     A,R0
   \   00009B   2405         ADD     A,#0x5
   \   00009D   FC           MOV     R4,A
   \   00009E   E9           MOV     A,R1
   \   00009F   3400         ADDC    A,#0x0
   \   0000A1   FD           MOV     R5,A
   \   0000A2   85..82       MOV     DPL,?XSP + 0
   \   0000A5   85..83       MOV     DPH,?XSP + 1
   \   0000A8   AA82         MOV     R2,DPL
   \   0000AA   AB83         MOV     R3,DPH
   \   0000AC   EE           MOV     A,R6
   \   0000AD   F9           MOV     R1,A
   \   0000AE   12....       LCALL   ??HalUARTWrite?relay
    611          
    612          }
   \   0000B1   758200       MOV     DPL,#0x0
   \   0000B4   758301       MOV     DPH,#0x1
   \   0000B7   12....       LCALL   ?ADD_XSTACK_DISP0_16
   \   0000BA   02....       LJMP    ?Subroutine0 & 0xFFFF
    613          
    614          /*********************************************************************
    615           * @fn      To_string
    616           *
    617           * @brief   
    618           *
    619           * @param   none
    620           *
    621           * @return  none
    622           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    623          void To_string(uint8 * dest, char * src, uint8 length)
   \                     To_string:
    624          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
    625              uint8 *xad;
    626              uint8 i=0;
    627              uint8 ch;
    628              xad=src+length-1;
                        ^
Warning[Pe513]: a value of type "char *" cannot be assigned to an entity of
          type "unsigned char *"
   \   000007   8E..         MOV     ?V0 + 0,R6
   \   000009   EC           MOV     A,R4
   \   00000A   25..         ADD     A,?V0 + 0
   \   00000C   F8           MOV     R0,A
   \   00000D   ED           MOV     A,R5
   \   00000E   3400         ADDC    A,#0x0
   \   000010   F9           MOV     R1,A
   \   000011   E8           MOV     A,R0
   \   000012   24FF         ADD     A,#-0x1
   \   000014   18           DEC     R0
   \   000015   E9           MOV     A,R1
   \   000016   34FF         ADDC    A,#-0x1
   \   000018   F9           MOV     R1,A
    629              for(i=0;i<length;i++,xad--)
   \   000019   7F00         MOV     R7,#0x0
   \   00001B   8020         SJMP    ??To_string_0
    630                      {
    631                              ch=(*xad>>4)&0x0F;
    632                              dest[i<<1]=ch+((ch<10)?'0':'7');
    633                              ch=*xad&0x0F;
    634                              dest[(i<<1)+1]=ch+((ch<10)?'0':'7');                    
   \                     ??To_string_1:
   \   00001D   7C37         MOV     R4,#0x37
   \                     ??To_string_2:
   \   00001F   EC           MOV     A,R4
   \   000020   25..         ADD     A,?V0 + 0
   \   000022   C0E0         PUSH    A
   \   000024   EF           MOV     A,R7
   \   000025   C3           CLR     C
   \   000026   33           RLC     A
   \   000027   FC           MOV     R4,A
   \   000028   EA           MOV     A,R2
   \   000029   2C           ADD     A,R4
   \   00002A   F582         MOV     DPL,A
   \   00002C   EB           MOV     A,R3
   \   00002D   3D           ADDC    A,R5
   \   00002E   F583         MOV     DPH,A
   \   000030   A3           INC     DPTR
   \   000031   D0E0         POP     A
   \   000033   F0           MOVX    @DPTR,A
   \   000034   0F           INC     R7
   \   000035   E8           MOV     A,R0
   \   000036   24FF         ADD     A,#-0x1
   \   000038   18           DEC     R0
   \   000039   E9           MOV     A,R1
   \   00003A   34FF         ADDC    A,#-0x1
   \   00003C   F9           MOV     R1,A
   \                     ??To_string_0:
   \   00003D   EF           MOV     A,R7
   \   00003E   C3           CLR     C
   \   00003F   9E           SUBB    A,R6
   \   000040   503E         JNC     ??To_string_3
   \   000042   8882         MOV     DPL,R0
   \   000044   8983         MOV     DPH,R1
   \   000046   E0           MOVX    A,@DPTR
   \   000047   C4           SWAP    A
   \   000048   540F         ANL     A,#0xf
   \   00004A   F5..         MOV     ?V0 + 0,A
   \   00004C   C3           CLR     C
   \   00004D   940A         SUBB    A,#0xa
   \   00004F   5004         JNC     ??To_string_4
   \   000051   7C30         MOV     R4,#0x30
   \   000053   8002         SJMP    ??To_string_5
   \                     ??To_string_4:
   \   000055   7C37         MOV     R4,#0x37
   \                     ??To_string_5:
   \   000057   EC           MOV     A,R4
   \   000058   25..         ADD     A,?V0 + 0
   \   00005A   C0E0         PUSH    A
   \   00005C   EF           MOV     A,R7
   \   00005D   C3           CLR     C
   \   00005E   33           RLC     A
   \   00005F   FC           MOV     R4,A
   \   000060   E4           CLR     A
   \   000061   33           RLC     A
   \   000062   FD           MOV     R5,A
   \   000063   EA           MOV     A,R2
   \   000064   2C           ADD     A,R4
   \   000065   F582         MOV     DPL,A
   \   000067   EB           MOV     A,R3
   \   000068   3D           ADDC    A,R5
   \   000069   F583         MOV     DPH,A
   \   00006B   D0E0         POP     A
   \   00006D   F0           MOVX    @DPTR,A
   \   00006E   8882         MOV     DPL,R0
   \   000070   8983         MOV     DPH,R1
   \   000072   E0           MOVX    A,@DPTR
   \   000073   540F         ANL     A,#0xf
   \   000075   F5..         MOV     ?V0 + 0,A
   \   000077   C3           CLR     C
   \   000078   940A         SUBB    A,#0xa
   \   00007A   50A1         JNC     ??To_string_1
   \   00007C   7C30         MOV     R4,#0x30
   \   00007E   809F         SJMP    ??To_string_2
    635                      }
    636          }
   \                     ??To_string_3:
   \   000080   7F02         MOV     R7,#0x2
   \   000082   02....       LJMP    ?BANKED_LEAVE_XDATA
    637          
    638          /*********************************************************************
    639           * @fn      ShowInfo
    640           *
    641           * @brief   
    642           *
    643           * @param   none
    644           *
    645           * @return  none
    646           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    647          void ShowInfo(void)
   \                     ShowInfo:
    648          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 35
   \   000005   74DD         MOV     A,#-0x23
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    649                  RFTX rftx;
    650          	uint16 nwk;   
    651                  num[3]++;
   \   00000A   90....       MOV     DPTR,#num + 3
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   04           INC     A
   \   00000F   F0           MOVX    @DPTR,A
    652                  if(num[3]==10){
   \   000010   640A         XRL     A,#0xa
   \   000012   7022         JNZ     ??CrossCallReturnLabel_12
    653                      num[2]++;
   \   000014   90....       MOV     DPTR,#num + 2
   \   000017   12....       LCALL   ?Subroutine8 & 0xFFFF
    654                      num[3]=0;
    655                      if(num[2]==10){
   \                     ??CrossCallReturnLabel_10:
   \   00001A   90....       MOV     DPTR,#num + 2
   \   00001D   E0           MOVX    A,@DPTR
   \   00001E   640A         XRL     A,#0xa
   \   000020   7014         JNZ     ??CrossCallReturnLabel_12
    656                        num[1]++;
   \   000022   90....       MOV     DPTR,#num + 1
   \   000025   12....       LCALL   ?Subroutine8 & 0xFFFF
    657                        num[2]=0;
    658                        if(num[1]==10){
   \                     ??CrossCallReturnLabel_11:
   \   000028   90....       MOV     DPTR,#num + 1
   \   00002B   E0           MOVX    A,@DPTR
   \   00002C   640A         XRL     A,#0xa
   \   00002E   7006         JNZ     ??CrossCallReturnLabel_12
    659                          num[0]++;
   \   000030   90....       MOV     DPTR,#num
   \   000033   12....       LCALL   ?Subroutine8 & 0xFFFF
    660                          num[1]=0;
    661                        }
    662                      }
    663                  }
    664                    //HalUARTWrite(0,num,8);
    665                    for(int i=0;i<8;i++){
   \                     ??CrossCallReturnLabel_12:
   \   000036   7800         MOV     R0,#0x0
   \   000038   7900         MOV     R1,#0x0
    666                      switch(num[i]){
   \                     ??ShowInfo_0:
   \   00003A   74..         MOV     A,#num & 0xff
   \   00003C   28           ADD     A,R0
   \   00003D   F582         MOV     DPL,A
   \   00003F   74..         MOV     A,#(num >> 8) & 0xff
   \   000041   39           ADDC    A,R1
   \   000042   F583         MOV     DPH,A
   \   000044   E0           MOVX    A,@DPTR
   \   000045   601D         JZ      ??ShowInfo_1
   \   000047   14           DEC     A
   \   000048   6021         JZ      ??ShowInfo_2
   \   00004A   14           DEC     A
   \   00004B   6025         JZ      ??ShowInfo_3
   \   00004D   14           DEC     A
   \   00004E   6029         JZ      ??ShowInfo_4
   \   000050   14           DEC     A
   \   000051   602D         JZ      ??ShowInfo_5
   \   000053   14           DEC     A
   \   000054   6031         JZ      ??ShowInfo_6
   \   000056   14           DEC     A
   \   000057   6035         JZ      ??ShowInfo_7
   \   000059   14           DEC     A
   \   00005A   6039         JZ      ??ShowInfo_8
   \   00005C   14           DEC     A
   \   00005D   603D         JZ      ??ShowInfo_9
   \   00005F   14           DEC     A
   \   000060   6041         JZ      ??ShowInfo_10
   \   000062   8045         SJMP    ??ShowInfo_11
    667                        case 0:
    668                          num1[i]='0';
   \                     ??ShowInfo_1:
   \   000064   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_13:
   \   000067   7430         MOV     A,#0x30
   \   000069   803D         SJMP    ??ShowInfo_12
    669                          break;
    670                        case 1:
    671                          num1[i]='1';
   \                     ??ShowInfo_2:
   \   00006B   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_14:
   \   00006E   7431         MOV     A,#0x31
   \   000070   8036         SJMP    ??ShowInfo_12
    672                          break;
    673                        case 2:
    674                          num1[i]='2';
   \                     ??ShowInfo_3:
   \   000072   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_15:
   \   000075   7432         MOV     A,#0x32
   \   000077   802F         SJMP    ??ShowInfo_12
    675                          break;
    676                        case 3:
    677                          num1[i]='3';
   \                     ??ShowInfo_4:
   \   000079   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_16:
   \   00007C   7433         MOV     A,#0x33
   \   00007E   8028         SJMP    ??ShowInfo_12
    678                          break;
    679                        case 4:
    680                          num1[i]='4';
   \                     ??ShowInfo_5:
   \   000080   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_17:
   \   000083   7434         MOV     A,#0x34
   \   000085   8021         SJMP    ??ShowInfo_12
    681                          break;
    682                         case 5:
    683                          num1[i]='5';
   \                     ??ShowInfo_6:
   \   000087   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_18:
   \   00008A   7435         MOV     A,#0x35
   \   00008C   801A         SJMP    ??ShowInfo_12
    684                          break;
    685                         case 6:
    686                          num1[i]='6';
   \                     ??ShowInfo_7:
   \   00008E   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_19:
   \   000091   7436         MOV     A,#0x36
   \   000093   8013         SJMP    ??ShowInfo_12
    687                          break;
    688                         case 7:
    689                          num1[i]='7';
   \                     ??ShowInfo_8:
   \   000095   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_20:
   \   000098   7437         MOV     A,#0x37
   \   00009A   800C         SJMP    ??ShowInfo_12
    690                          break;
    691                         case 8:
    692                          num1[i]='8';
   \                     ??ShowInfo_9:
   \   00009C   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_21:
   \   00009F   7438         MOV     A,#0x38
   \   0000A1   8005         SJMP    ??ShowInfo_12
    693                          break;
    694                         case 9:
    695                          num1[i]='9';
   \                     ??ShowInfo_10:
   \   0000A3   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_22:
   \   0000A6   7439         MOV     A,#0x39
   \                     ??ShowInfo_12:
   \   0000A8   F0           MOVX    @DPTR,A
    696                          break;
    697                         default:
    698                          break;
    699                      }
    700                    }
   \                     ??ShowInfo_11:
   \   0000A9   12....       LCALL   ?Subroutine11 & 0xFFFF
   \                     ??CrossCallReturnLabel_23:
   \   0000AC   9408         SUBB    A,#0x8
   \   0000AE   E9           MOV     A,R1
   \   0000AF   9400         SUBB    A,#0x0
   \   0000B1   A2D2         MOV     C,0xD0 /* PSW */.2
   \   0000B3   65D0         XRL     A,PSW
   \   0000B5   33           RLC     A
   \   0000B6   4082         JC      ??ShowInfo_0
    701                  if(SampleApp_NwkState==DEV_END_DEVICE)
   \   0000B8   90....       MOV     DPTR,#SampleApp_NwkState
   \   0000BB   E0           MOVX    A,@DPTR
   \   0000BC   6406         XRL     A,#0x6
   \   0000BE   701D         JNZ     ??ShowInfo_13
    702                  {
    703                    osal_memcpy(rftx.type,"END",3);
   \   0000C0                ; Setup parameters for call to function osal_memcpy
   \   0000C0   75....       MOV     ?V0 + 0,#`?<Constant "END">` & 0xff
   \   0000C3   75....       MOV     ?V0 + 1,#(`?<Constant "END">` >> 8) & 0xff
   \   0000C6   75..00       MOV     ?V0 + 2,#0x0
   \   0000C9   78..         MOV     R0,#?V0 + 0
   \   0000CB   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000CE   7C03         MOV     R4,#0x3
   \   0000D0   7D00         MOV     R5,#0x0
   \   0000D2   7411         MOV     A,#0x11
   \   0000D4   12....       LCALL   ?XSTACK_DISP0_8
   \   0000D7   12....       LCALL   ?Subroutine10 & 0xFFFF
    704                  }
   \                     ??CrossCallReturnLabel_42:
   \   0000DA   12....       LCALL   ?DEALLOC_XSTACK8
    705                  if(SampleApp_NwkState==DEV_ROUTER)
   \                     ??ShowInfo_13:
   \   0000DD   90....       MOV     DPTR,#SampleApp_NwkState
   \   0000E0   E0           MOVX    A,@DPTR
   \   0000E1   6407         XRL     A,#0x7
   \   0000E3   701D         JNZ     ??ShowInfo_14
    706                  {
    707                    osal_memcpy(rftx.type,"ROU",3);
   \   0000E5                ; Setup parameters for call to function osal_memcpy
   \   0000E5   75....       MOV     ?V0 + 0,#`?<Constant "ROU">` & 0xff
   \   0000E8   75....       MOV     ?V0 + 1,#(`?<Constant "ROU">` >> 8) & 0xff
   \   0000EB   75..00       MOV     ?V0 + 2,#0x0
   \   0000EE   78..         MOV     R0,#?V0 + 0
   \   0000F0   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000F3   7C03         MOV     R4,#0x3
   \   0000F5   7D00         MOV     R5,#0x0
   \   0000F7   7411         MOV     A,#0x11
   \   0000F9   12....       LCALL   ?XSTACK_DISP0_8
   \   0000FC   12....       LCALL   ?Subroutine10 & 0xFFFF
    708                  }
   \                     ??CrossCallReturnLabel_43:
   \   0000FF   12....       LCALL   ?DEALLOC_XSTACK8
    709          	nwk=NLME_GetShortAddr();
   \                     ??ShowInfo_14:
   \   000102                ; Setup parameters for call to function NLME_GetShortAddr
   \   000102   12....       LCALL   ??NLME_GetShortAddr?relay
   \   000105   85..82       MOV     DPL,?XSP + 0
   \   000108   85..83       MOV     DPH,?XSP + 1
   \   00010B   12....       LCALL   ?Subroutine4 & 0xFFFF
    710          	To_string(rftx.myNWK,(uint8 *)&nwk,2);
                 	                     ^
Warning[Pe167]: argument of type "unsigned char *" is incompatible with
          parameter of type "char *"
   \                     ??CrossCallReturnLabel_4:
   \   00010E   85..82       MOV     DPL,?XSP + 0
   \   000111   85..83       MOV     DPH,?XSP + 1
   \   000114   AC82         MOV     R4,DPL
   \   000116   AD83         MOV     R5,DPH
   \   000118   7411         MOV     A,#0x11
   \   00011A   12....       LCALL   ?XSTACK_DISP0_8
   \   00011D   AA82         MOV     R2,DPL
   \   00011F   AB83         MOV     R3,DPH
   \   000121   12....       LCALL   ??To_string?relay
    711                  //To_string(rftx.myMAC,NLME_GetExtAddr(),8);
    712          	//nwk=NLME_GetCoordShortAddr();
    713          	//To_string(rftx.pNWK,(uint8 *)&nwk,2);
    714                  osal_memcpy(rftx.myMAC,num1,4);
   \   000124                ; Setup parameters for call to function osal_memcpy
   \   000124   75....       MOV     ?V0 + 0,#num1 & 0xff
   \   000127   75....       MOV     ?V0 + 1,#(num1 >> 8) & 0xff
   \   00012A   75..00       MOV     ?V0 + 2,#0x0
   \   00012D   78..         MOV     R0,#?V0 + 0
   \   00012F   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000132   7C04         MOV     R4,#0x4
   \   000134   7D00         MOV     R5,#0x0
   \   000136   7416         MOV     A,#0x16
   \   000138   12....       LCALL   ?XSTACK_DISP0_8
   \   00013B   12....       LCALL   ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_44:
   \   00013E   12....       LCALL   ?DEALLOC_XSTACK8
    715                  afAddrType_t my_DstAddr;
    716                  my_DstAddr.addrMode=(afAddrMode_t)Addr16Bit;
   \   000141   740A         MOV     A,#0xa
   \   000143   12....       LCALL   ?XSTACK_DISP0_8
   \   000146   7402         MOV     A,#0x2
   \   000148   F0           MOVX    @DPTR,A
    717                  my_DstAddr.endPoint=SAMPLEAPP_ENDPOINT;
   \   000149   740B         MOV     A,#0xb
   \   00014B   12....       LCALL   ?XSTACK_DISP0_8
   \   00014E   7414         MOV     A,#0x14
   \   000150   F0           MOVX    @DPTR,A
    718                  my_DstAddr.addr.shortAddr=0x0000;
   \   000151   7402         MOV     A,#0x2
   \   000153   12....       LCALL   ?XSTACK_DISP0_8
   \   000156   12....       LCALL   ?Subroutine3 & 0xFFFF
    719                  AF_DataRequest(&my_DstAddr,
    720                                 &SampleApp_epDesc,
    721                                 SAMPLEAPP_CLUSTERID,
    722                                 12,
    723                                 (uint8 *)&rftx,
    724                                 &SampleApp_TransID,
    725                                 AF_ACK_REQUEST,
    726                                 AF_DEFAULT_RADIUS);
   \                     ??CrossCallReturnLabel_0:
   \   000159   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00015C   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   00015F   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000162   78..         MOV     R0,#?V0 + 0
   \   000164   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000167   7411         MOV     A,#0x11
   \   000169   12....       LCALL   ?XSTACK_DISP0_8
   \   00016C   8582..       MOV     ?V0 + 0,DPL
   \   00016F   8583..       MOV     ?V0 + 1,DPH
   \   000172   78..         MOV     R0,#?V0 + 0
   \   000174   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000177   75..0C       MOV     ?V0 + 0,#0xc
   \   00017A   75..00       MOV     ?V0 + 1,#0x0
   \   00017D   78..         MOV     R0,#?V0 + 0
   \   00017F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000182   75..01       MOV     ?V0 + 0,#0x1
   \   000185   78..         MOV     R0,#?V0 + 0
   \   000187   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00018A   7910         MOV     R1,#0x10
   \   00018C   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   00018E   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000190   740B         MOV     A,#0xb
   \   000192   12....       LCALL   ?XSTACK_DISP0_8
   \   000195   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_30:
   \   000198   12....       LCALL   ?DEALLOC_XSTACK8
    727                 /*HalUARTWrite(0,"type:",5);
    728                 HalUARTWrite(0,rftx.type,3);
    729                 HalUARTWrite(0,"myNWK:",6);
    730                 HalUARTWrite(0,rftx.myNWK,4);
    731                 HalUARTWrite(0,"pNWK:",5);
    732                 HalUARTWrite(0,rftx.pNWK,4);*/
    733                  
    734            /*RFTX rftx;
    735              uint16 nwk;
    736              
    737          
    738              if(SampleApp_NwkState==DEV_END_DEVICE){
    739                osal_memcpy(rftx.type,"END",3);
    740              }
    741              if(SampleApp_NwkState==DEV_ROUTER){
    742                osal_memcpy(rftx.type,"ROU",3);
    743              }
    744              nwk=NLME_GetShortAddr();//获取本节点的网络地址
    745              //mnwk = NLME_GetExtAddr();
    746              To_string(rftx.myNWK,(uint8 *)&nwk,2);//把本节点的网络地址存储在myNWK
    747              //To_string(rftx.myNWK,(char *)NLME_GetExtAddr(),8);
    748          
    749              nwk=NLME_GetCoordShortAddr();//获取父节点的网络地址
    750              To_string(rftx.pNWK,(uint8 *)&nwk,2);//父节点的网络地址存储在pNWK
    751              
    752              HalUARTWrite(0,"type:",5);
    753              HalUARTWrite(0,rftx.type,3);
    754               HalUARTWrite(0,"myNWK:",6);
    755              HalUARTWrite(0,rftx.myNWK,2);
    756              HalUARTWrite(0,"pNWK:",5);
    757              HalUARTWrite(0,rftx.pNWK,2);
    758              
    759              afAddrType_t my_DstAddr;
    760              my_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;//设置发送模式为点播
    761              my_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;//初始化端口号
    762              my_DstAddr.addr.shortAddr = 0x0000;//指定协调器的网络地址（指定发给协调器）
    763              AF_DataRequest(&my_DstAddr,
    764                             &SampleApp_epDesc,
    765                             SAMPLEAPP_CLUSTERID,
    766                             11,//长度
    767                             (uint8 *)&rftx,//发送的数据
    768                             &SampleApp_TransID,
    769                             AF_DISCV_ROUTE,
    770                             AF_DEFAULT_RADIUS); */
    771          }
   \   00019B   7423         MOV     A,#0x23
   \   00019D   02....       LJMP    ?Subroutine1 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   AA82         MOV     R2,DPL
   \   000002   AB83         MOV     R3,DPH
   \   000004                REQUIRE ??Subroutine19_0
   \   000004                ; // Fall through to label ??Subroutine19_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   74..         MOV     A,#num1 & 0xff
   \   000002   28           ADD     A,R0
   \   000003   F582         MOV     DPL,A
   \   000005   74..         MOV     A,#(num1 >> 8) & 0xff
   \   000007   39           ADDC    A,R1
   \   000008   F583         MOV     DPH,A
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   04           INC     A
   \   000002   F0           MOVX    @DPTR,A
   \   000003   A3           INC     DPTR
   \   000004   E4           CLR     A
   \   000005   F0           MOVX    @DPTR,A
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine11:
   \   000000   E8           MOV     A,R0
   \   000001   2401         ADD     A,#0x1
   \   000003   08           INC     R0
   \   000004   E9           MOV     A,R1
   \   000005   3400         ADDC    A,#0x0
   \   000007   F9           MOV     R1,A
   \   000008   C3           CLR     C
   \   000009   E8           MOV     A,R0
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   E4           CLR     A
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   F0           MOVX    @DPTR,A
   \   000004                ; Setup parameters for call to function AF_DataRequest
   \   000004                ; Setup parameters for call to function AF_DataRequest
   \   000004                ; Setup parameters for call to function AF_DataRequest
   \   000004   75..1E       MOV     ?V0 + 0,#0x1e
   \   000007   78..         MOV     R0,#?V0 + 0
   \   000009   22           RET
    772          
    773          
    774          /*********************************************************************
    775           * @fn      SampleApp_MessageMSGCB
    776           *
    777           * @brief   Data message processor callback.  This function processes
    778           *          any incoming data - probably from other devices.  So, based
    779           *          on cluster ID, perform the intended action.
    780           *
    781           * @param   none
    782           *
    783           * @return  none
    784           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    785          void SampleApp_MessageMSGCB( afIncomingMSGPacket_t *pkt )
   \                     SampleApp_MessageMSGCB:
    786          { 
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 45
   \   000005   74D3         MOV     A,#-0x2d
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    787            //uint8 i,len;
    788            uint8 buffer[4];
    789            uint8 *sendbuf="YES";
    790          
    791            uint8 mychannel;
    792            
    793            switch ( pkt->clusterId )
   \   00000E   8E82         MOV     DPL,R6
   \   000010   8F83         MOV     DPH,R7
   \   000012   A3           INC     DPTR
   \   000013   A3           INC     DPTR
   \   000014   A3           INC     DPTR
   \   000015   A3           INC     DPTR
   \   000016   E0           MOVX    A,@DPTR
   \   000017   6401         XRL     A,#0x1
   \   000019   7002         JNZ     ??SampleApp_MessageMSGCB_0
   \   00001B   A3           INC     DPTR
   \   00001C   E0           MOVX    A,@DPTR
   \                     ??SampleApp_MessageMSGCB_0:
   \   00001D   6003         JZ      $+5
   \   00001F   02....       LJMP    ??CrossCallReturnLabel_35 & 0xFFFF
    794            {
    795              //int i;
    796              //uint16 len;
    797              case SAMPLEAPP_CLUSTERID: 
    798                osal_memcpy(buffer,pkt->cmd.Data,pkt->cmd.DataLength);
   \   000022                ; Setup parameters for call to function osal_memcpy
   \   000022   EE           MOV     A,R6
   \   000023   2422         ADD     A,#0x22
   \   000025   F582         MOV     DPL,A
   \   000027   EF           MOV     A,R7
   \   000028   3400         ADDC    A,#0x0
   \   00002A   F583         MOV     DPH,A
   \   00002C   E0           MOVX    A,@DPTR
   \   00002D   F5..         MOV     ?V0 + 0,A
   \   00002F   A3           INC     DPTR
   \   000030   E0           MOVX    A,@DPTR
   \   000031   F5..         MOV     ?V0 + 1,A
   \   000033   75..00       MOV     ?V0 + 2,#0x0
   \   000036   78..         MOV     R0,#?V0 + 0
   \   000038   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00003B   12....       LCALL   ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_25:
   \   00003E   7404         MOV     A,#0x4
   \   000040   12....       LCALL   ?XSTACK_DISP0_8
   \   000043   12....       LCALL   ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_45:
   \   000046   12....       LCALL   ?DEALLOC_XSTACK8
    799                
    800                //接收到协调器发来确认指令，返回YES
    801                if((buffer[0]=='C')||(buffer[1]=='F')||(buffer[2]=='M')){
   \   000049   7401         MOV     A,#0x1
   \   00004B   12....       LCALL   ?XSTACK_DISP0_8
   \   00004E   E0           MOVX    A,@DPTR
   \   00004F   6443         XRL     A,#0x43
   \   000051   6014         JZ      ??SampleApp_MessageMSGCB_1
   \   000053   7402         MOV     A,#0x2
   \   000055   12....       LCALL   ?XSTACK_DISP0_8
   \   000058   E0           MOVX    A,@DPTR
   \   000059   6446         XRL     A,#0x46
   \   00005B   600A         JZ      ??SampleApp_MessageMSGCB_1
   \   00005D   7403         MOV     A,#0x3
   \   00005F   12....       LCALL   ?XSTACK_DISP0_8
   \   000062   E0           MOVX    A,@DPTR
   \   000063   644D         XRL     A,#0x4d
   \   000065   7055         JNZ     ??SampleApp_MessageMSGCB_2
    802                  afAddrType_t my_DstAddr;
    803                  my_DstAddr.addrMode=(afAddrMode_t)Addr16Bit;
   \                     ??SampleApp_MessageMSGCB_1:
   \   000067   7414         MOV     A,#0x14
   \   000069   12....       LCALL   ?XSTACK_DISP0_8
   \   00006C   7402         MOV     A,#0x2
   \   00006E   F0           MOVX    @DPTR,A
    804                  my_DstAddr.endPoint=SAMPLEAPP_ENDPOINT;
   \   00006F   7415         MOV     A,#0x15
   \   000071   12....       LCALL   ?XSTACK_DISP0_8
   \   000074   7414         MOV     A,#0x14
   \   000076   F0           MOVX    @DPTR,A
    805                  my_DstAddr.addr.shortAddr=0x0000;
   \   000077   740C         MOV     A,#0xc
   \   000079   12....       LCALL   ?XSTACK_DISP0_8
   \   00007C   12....       LCALL   ?Subroutine3 & 0xFFFF
    806                  AF_DataRequest(&my_DstAddr,
    807                                 &SampleApp_epDesc,
    808                                 SAMPLEAPP_CLUSTERID,
    809                                 3,
    810                                 sendbuf,
    811                                 &SampleApp_TransID,
    812                                 AF_DISCV_ROUTE,
    813                                 AF_DEFAULT_RADIUS);
    814                }
   \                     ??CrossCallReturnLabel_1:
   \   00007F   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000082   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000085   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000088   78..         MOV     R0,#?V0 + 0
   \   00008A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00008D   75....       MOV     ?V0 + 0,#`?<Constant "YES">` & 0xff
   \   000090   75....       MOV     ?V0 + 1,#(`?<Constant "YES">` >> 8) & 0xff
   \   000093   78..         MOV     R0,#?V0 + 0
   \   000095   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000098   75..03       MOV     ?V0 + 0,#0x3
   \   00009B   75..00       MOV     ?V0 + 1,#0x0
   \   00009E   78..         MOV     R0,#?V0 + 0
   \   0000A0   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000A3   75..01       MOV     ?V0 + 0,#0x1
   \   0000A6   78..         MOV     R0,#?V0 + 0
   \   0000A8   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000AB   7920         MOV     R1,#0x20
   \   0000AD   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   0000AF   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   0000B1   7415         MOV     A,#0x15
   \   0000B3   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B6   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_31:
   \   0000B9   12....       LCALL   ?DEALLOC_XSTACK8
    815                
    816                //接收到协调器广播的改变PANID命令，设置定时器1000ms后进入重启事件
    817                if((buffer[0]==0xE1)&&(buffer[3]==0xFF)){
   \                     ??SampleApp_MessageMSGCB_2:
   \   0000BC   7401         MOV     A,#0x1
   \   0000BE   12....       LCALL   ?XSTACK_DISP0_8
   \   0000C1   E0           MOVX    A,@DPTR
   \   0000C2   64E1         XRL     A,#0xe1
   \   0000C4   7044         JNZ     ??CrossCallReturnLabel_34
   \   0000C6   7404         MOV     A,#0x4
   \   0000C8   12....       LCALL   ?XSTACK_DISP0_8
   \   0000CB   E0           MOVX    A,@DPTR
   \   0000CC   F4           CPL     A
   \   0000CD   703B         JNZ     ??CrossCallReturnLabel_34
    818                    mypanid=(buffer[1]<<8) + buffer[2];
   \   0000CF   7402         MOV     A,#0x2
   \   0000D1   12....       LCALL   ?XSTACK_DISP0_8
   \   0000D4   E0           MOVX    A,@DPTR
   \   0000D5   F9           MOV     R1,A
   \   0000D6   7403         MOV     A,#0x3
   \   0000D8   12....       LCALL   ?XSTACK_DISP0_8
   \   0000DB   E0           MOVX    A,@DPTR
   \   0000DC   F8           MOV     R0,A
   \   0000DD   90....       MOV     DPTR,#mypanid
   \   0000E0   F0           MOVX    @DPTR,A
   \   0000E1   A3           INC     DPTR
   \   0000E2   E9           MOV     A,R1
   \   0000E3   F0           MOVX    @DPTR,A
    819                    
    820                    //osal_memcpy(&_NIB.nwkPanId,&mypanid,sizeof(uint16));
    821                    
    822                    _NIB.nwkPanId = mypanid;
   \   0000E4   90....       MOV     DPTR,#_NIB + 33
   \   0000E7   E8           MOV     A,R0
   \   0000E8   F0           MOVX    @DPTR,A
   \   0000E9   A3           INC     DPTR
   \   0000EA   E9           MOV     A,R1
   \   0000EB   12....       LCALL   ??Subroutine18_0 & 0xFFFF
    823                    NLME_UpdateNV(0x01);
    824                    osal_nv_write(ZCD_NV_PANID, 0, osal_nv_item_len( ZCD_NV_PANID ), &zgConfigPANID);
   \                     ??CrossCallReturnLabel_39:
   \   0000EE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000F1                ; Setup parameters for call to function osal_nv_item_len
   \   0000F1   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_49:
   \   0000F4   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000F7   7C00         MOV     R4,#0x0
   \   0000F9   7D00         MOV     R5,#0x0
   \   0000FB   7A83         MOV     R2,#-0x7d
   \   0000FD   7B00         MOV     R3,#0x0
   \   0000FF   12....       LCALL   ??osal_nv_write?relay
   \   000102   7404         MOV     A,#0x4
   \   000104   12....       LCALL   ?DEALLOC_XSTACK8
    825                    osal_start_timerEx( SampleApp_TaskID,
    826                                  SAMPLEAPP_RESET_EVT,
    827                                  1000 ); 
   \   000107                ; Setup parameters for call to function osal_start_timerEx
   \   000107   12....       LCALL   ?Subroutine7 & 0xFFFF
    828                }
    829                
    830                //收到协调器统计在网数量命令，发送0xD1+短地址给协调器
    831                  RFTX rftx;
    832          	uint16 nwk;
    833          	nwk=NLME_GetShortAddr();
   \                     ??CrossCallReturnLabel_34:
   \   00010A                ; Setup parameters for call to function NLME_GetShortAddr
   \   00010A   12....       LCALL   ??NLME_GetShortAddr?relay
   \   00010D   7405         MOV     A,#0x5
   \   00010F   12....       LCALL   ?XSTACK_DISP0_8
   \   000112   12....       LCALL   ?Subroutine4 & 0xFFFF
    834          	To_string(rftx.myNWK,(uint8 *)&nwk,2);
                 	                     ^
Warning[Pe167]: argument of type "unsigned char *" is incompatible with
          parameter of type "char *"
   \                     ??CrossCallReturnLabel_5:
   \   000115   7405         MOV     A,#0x5
   \   000117   12....       LCALL   ?XSTACK_DISP0_8
   \   00011A   AC82         MOV     R4,DPL
   \   00011C   AD83         MOV     R5,DPH
   \   00011E   741B         MOV     A,#0x1b
   \   000120   12....       LCALL   ?XSTACK_DISP0_8
   \   000123   AA82         MOV     R2,DPL
   \   000125   AB83         MOV     R3,DPH
   \   000127   12....       LCALL   ??To_string?relay
    835                  
    836                if((buffer[0]==0xD1)&&(buffer[1]==0xD2)&&(buffer[2]==0xD3)&&(buffer[3]==0xFF)){
   \   00012A   7401         MOV     A,#0x1
   \   00012C   12....       LCALL   ?XSTACK_DISP0_8
   \   00012F   E0           MOVX    A,@DPTR
   \   000130   64D1         XRL     A,#0xd1
   \   000132   6003         JZ      $+5
   \   000134   02....       LJMP    ??SampleApp_MessageMSGCB_3 & 0xFFFF
   \   000137   7402         MOV     A,#0x2
   \   000139   12....       LCALL   ?XSTACK_DISP0_8
   \   00013C   E0           MOVX    A,@DPTR
   \   00013D   64D2         XRL     A,#0xd2
   \   00013F   6003         JZ      $+5
   \   000141   02....       LJMP    ??SampleApp_MessageMSGCB_3 & 0xFFFF
   \   000144   7403         MOV     A,#0x3
   \   000146   12....       LCALL   ?XSTACK_DISP0_8
   \   000149   E0           MOVX    A,@DPTR
   \   00014A   64D3         XRL     A,#0xd3
   \   00014C   6003         JZ      $+5
   \   00014E   02....       LJMP    ??SampleApp_MessageMSGCB_3 & 0xFFFF
   \   000151   7404         MOV     A,#0x4
   \   000153   12....       LCALL   ?XSTACK_DISP0_8
   \   000156   E0           MOVX    A,@DPTR
   \   000157   F4           CPL     A
   \   000158   6003         JZ      $+5
   \   00015A   02....       LJMP    ??SampleApp_MessageMSGCB_3 & 0xFFFF
    837                  uint8 tem_buf[5];
    838                  tem_buf[0]=0xD1;
   \   00015D   7407         MOV     A,#0x7
   \   00015F   12....       LCALL   ?XSTACK_DISP0_8
   \   000162   74D1         MOV     A,#-0x2f
   \   000164   F0           MOVX    @DPTR,A
    839                  for(int i=0;i<5;i++){
   \   000165   7800         MOV     R0,#0x0
   \   000167   7900         MOV     R1,#0x0
    840                      tem_buf[i+1]=rftx.myNWK[i];
   \                     ??SampleApp_MessageMSGCB_4:
   \   000169   7418         MOV     A,#0x18
   \   00016B   12....       LCALL   ?XSTACK_DISP0_8
   \   00016E   12....       LCALL   ?Subroutine13 & 0xFFFF
    841                  }
   \                     ??CrossCallReturnLabel_27:
   \   000171   A3           INC     DPTR
   \   000172   A3           INC     DPTR
   \   000173   E0           MOVX    A,@DPTR
   \   000174   C0E0         PUSH    A
   \   000176   7407         MOV     A,#0x7
   \   000178   12....       LCALL   ?XSTACK_DISP0_8
   \   00017B   12....       LCALL   ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_28:
   \   00017E   D0E0         POP     A
   \   000180   F0           MOVX    @DPTR,A
   \   000181   12....       LCALL   ?Subroutine11 & 0xFFFF
   \                     ??CrossCallReturnLabel_24:
   \   000184   9405         SUBB    A,#0x5
   \   000186   E9           MOV     A,R1
   \   000187   9400         SUBB    A,#0x0
   \   000189   A2D2         MOV     C,0xD0 /* PSW */.2
   \   00018B   65D0         XRL     A,PSW
   \   00018D   33           RLC     A
   \   00018E   40D9         JC      ??SampleApp_MessageMSGCB_4
    842                    afAddrType_t my_DstAddr;
    843                    my_DstAddr.addrMode=(afAddrMode_t)Addr16Bit;
   \   000190   7414         MOV     A,#0x14
   \   000192   12....       LCALL   ?XSTACK_DISP0_8
   \   000195   7402         MOV     A,#0x2
   \   000197   F0           MOVX    @DPTR,A
    844                    my_DstAddr.endPoint=SAMPLEAPP_ENDPOINT;
   \   000198   7415         MOV     A,#0x15
   \   00019A   12....       LCALL   ?XSTACK_DISP0_8
   \   00019D   7414         MOV     A,#0x14
   \   00019F   F0           MOVX    @DPTR,A
    845                    my_DstAddr.addr.shortAddr=0x0000;
   \   0001A0   740C         MOV     A,#0xc
   \   0001A2   12....       LCALL   ?XSTACK_DISP0_8
   \   0001A5   12....       LCALL   ?Subroutine3 & 0xFFFF
    846                    
    847                    AF_DataRequest(&my_DstAddr,
    848                                   &SampleApp_epDesc,
    849                                   SAMPLEAPP_CLUSTERID,
    850                                   5,
    851                                   tem_buf,
    852                                   &SampleApp_TransID,
    853                                   AF_DISCV_ROUTE,
    854                                   AF_DEFAULT_RADIUS);
   \                     ??CrossCallReturnLabel_2:
   \   0001A8   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0001AB   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   0001AE   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   0001B1   78..         MOV     R0,#?V0 + 0
   \   0001B3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001B6   740A         MOV     A,#0xa
   \   0001B8   12....       LCALL   ?XSTACK_DISP0_8
   \   0001BB   8582..       MOV     ?V0 + 0,DPL
   \   0001BE   8583..       MOV     ?V0 + 1,DPH
   \   0001C1   78..         MOV     R0,#?V0 + 0
   \   0001C3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001C6   75..05       MOV     ?V0 + 0,#0x5
   \   0001C9   75..00       MOV     ?V0 + 1,#0x0
   \   0001CC   78..         MOV     R0,#?V0 + 0
   \   0001CE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001D1   75..01       MOV     ?V0 + 0,#0x1
   \   0001D4   78..         MOV     R0,#?V0 + 0
   \   0001D6   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001D9   7920         MOV     R1,#0x20
   \   0001DB   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   0001DD   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   0001DF   7415         MOV     A,#0x15
   \   0001E1   12....       LCALL   ?XSTACK_DISP0_8
   \   0001E4   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_32:
   \   0001E7   12....       LCALL   ?DEALLOC_XSTACK8
    855                    HalUARTWrite(0,tem_buf,5);
   \   0001EA                ; Setup parameters for call to function HalUARTWrite
   \   0001EA   7C05         MOV     R4,#0x5
   \   0001EC   7D00         MOV     R5,#0x0
   \   0001EE   7407         MOV     A,#0x7
   \   0001F0   12....       LCALL   ?XSTACK_DISP0_8
   \   0001F3   AA82         MOV     R2,DPL
   \   0001F5   AB83         MOV     R3,DPH
   \   0001F7   7900         MOV     R1,#0x0
   \   0001F9   12....       LCALL   ??HalUARTWrite?relay
    856                }
    857                HalUARTWrite(0,buffer,pkt->cmd.DataLength);
   \                     ??SampleApp_MessageMSGCB_3:
   \   0001FC                ; Setup parameters for call to function HalUARTWrite
   \   0001FC   12....       LCALL   ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_26:
   \   0001FF   7401         MOV     A,#0x1
   \   000201   12....       LCALL   ?XSTACK_DISP0_8
   \   000204   AA82         MOV     R2,DPL
   \   000206   AB83         MOV     R3,DPH
   \   000208   7900         MOV     R1,#0x0
   \   00020A   12....       LCALL   ??HalUARTWrite?relay
    858                //打印出广播接收到的数据
    859                //HalUARTWrite(0,"Get Date:",9);
    860                //HalUARTWrite(0,buffer,pkt->cmd.DataLength);
    861                 if((buffer[0]==0xFE)&&(buffer[3]==0xFF)){
   \   00020D   7401         MOV     A,#0x1
   \   00020F   12....       LCALL   ?XSTACK_DISP0_8
   \   000212   E0           MOVX    A,@DPTR
   \   000213   64FE         XRL     A,#0xfe
   \   000215   7061         JNZ     ??CrossCallReturnLabel_35
   \   000217   7404         MOV     A,#0x4
   \   000219   12....       LCALL   ?XSTACK_DISP0_8
   \   00021C   E0           MOVX    A,@DPTR
   \   00021D   F4           CPL     A
   \   00021E   7058         JNZ     ??CrossCallReturnLabel_35
    862                    mychannel=buffer[1];
   \   000220   7402         MOV     A,#0x2
   \   000222   12....       LCALL   ?XSTACK_DISP0_8
   \   000225   E0           MOVX    A,@DPTR
   \   000226   85..82       MOV     DPL,?XSP + 0
   \   000229   85..83       MOV     DPH,?XSP + 1
   \   00022C   F0           MOVX    @DPTR,A
    863                    if(mychannel<0x0B||mychannel>0x1A){
   \   00022D   24F5         ADD     A,#-0xb
   \   00022F   C3           CLR     C
   \   000230   9410         SUBB    A,#0x10
   \   000232   400F         JC      ??SampleApp_MessageMSGCB_5
    864                              HalUARTWrite(0,"wrong channel",13);
   \   000234                ; Setup parameters for call to function HalUARTWrite
   \   000234   7C0D         MOV     R4,#0xd
   \   000236   7D00         MOV     R5,#0x0
   \   000238   7A..         MOV     R2,#`?<Constant "wrong channel">` & 0xff
   \   00023A   7B..         MOV     R3,#(`?<Constant "wrong channel">` >> 8) & 0xff
   \   00023C   7900         MOV     R1,#0x0
   \   00023E   12....       LCALL   ??HalUARTWrite?relay
   \   000241   8035         SJMP    ??CrossCallReturnLabel_35
    865                    }
    866                    else{
    867                        HalUARTWrite(0,&mychannel,1);
   \                     ??SampleApp_MessageMSGCB_5:
   \   000243                ; Setup parameters for call to function HalUARTWrite
   \   000243   7C01         MOV     R4,#0x1
   \   000245   7D00         MOV     R5,#0x0
   \   000247   AA82         MOV     R2,DPL
   \   000249   AB83         MOV     R3,DPH
   \   00024B   7900         MOV     R1,#0x0
   \   00024D   12....       LCALL   ??HalUARTWrite?relay
    868                        _NIB.nwkLogicalChannel = mychannel;
   \   000250   85..82       MOV     DPL,?XSP + 0
   \   000253   85..83       MOV     DPH,?XSP + 1
   \   000256   E0           MOVX    A,@DPTR
   \   000257   12....       LCALL   ?Subroutine2 & 0xFFFF
    869                        NLME_UpdateNV(0x01);
    870                        osal_nv_write(ZCD_NV_CHANLIST, 0, osal_nv_item_len( ZCD_NV_CHANLIST ), &zgConfigPANID);
   \                     ??CrossCallReturnLabel_38:
   \   00025A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00025D                ; Setup parameters for call to function osal_nv_item_len
   \   00025D   7A84         MOV     R2,#-0x7c
   \   00025F   12....       LCALL   ??Subroutine20_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_51:
   \   000262   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000265   7C00         MOV     R4,#0x0
   \   000267   7D00         MOV     R5,#0x0
   \   000269   7A84         MOV     R2,#-0x7c
   \   00026B   7B00         MOV     R3,#0x0
   \   00026D   12....       LCALL   ??osal_nv_write?relay
   \   000270   7404         MOV     A,#0x4
   \   000272   12....       LCALL   ?DEALLOC_XSTACK8
    871                        osal_start_timerEx( SampleApp_TaskID,
    872                                      SAMPLEAPP_RESET_EVT,
    873                                      1000 );
   \   000275                ; Setup parameters for call to function osal_start_timerEx
   \   000275   12....       LCALL   ?Subroutine7 & 0xFFFF
    874                    }
    875                }
    876                
    877                
    878                
    879                
    880                //HalUARTWrite(0,"Get Date:",9); // 提示收到数据
    881                //HalUARTWrite(0,buffer,4);
    882                //HalUARTWrite(0,"\t\n",2);
    883                /*len=pkt->cmd.Data[0]; 
    884                HalUARTWrite(0,"Get Date:",9); // 提示收到数据
    885                for(i=0;i<len;i++) 
    886                  HalUARTWrite(0,&pkt->cmd.Data[i+1],1);//发给PC机显示 
    887                HalUARTWrite(0,"\t\n",2); // 回车换行 */
    888                
    889                break;
    890          
    891            }
    892          }
   \                     ??CrossCallReturnLabel_35:
   \   000278   742D         MOV     A,#0x2d
   \   00027A                REQUIRE ?Subroutine1
   \   00027A                ; // Fall through to label ?Subroutine1

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine13:
   \   000000   E582         MOV     A,DPL
   \   000002   28           ADD     A,R0
   \   000003   F582         MOV     DPL,A
   \   000005   E583         MOV     A,DPH
   \   000007   39           ADDC    A,R1
   \   000008   F583         MOV     DPH,A
   \   00000A   A3           INC     DPTR
   \   00000B   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine12:
   \   000000   EE           MOV     A,R6
   \   000001   2420         ADD     A,#0x20
   \   000003   F582         MOV     DPL,A
   \   000005   EF           MOV     A,R7
   \   000006   3400         ADDC    A,#0x0
   \   000008   F583         MOV     DPH,A
   \   00000A   E0           MOVX    A,@DPTR
   \   00000B   FC           MOV     R4,A
   \   00000C   A3           INC     DPTR
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   FD           MOV     R5,A
   \   00000F   22           RET

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_ProcessEvent?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_ProcessEvent

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Uart_Read?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Uart_Read

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Uart_Write?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Uart_Write

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??To_string?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    To_string

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ShowInfo?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ShowInfo

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_MessageMSGCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_MessageMSGCB

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "uartinit">`:
   \   000000   75617274     DB "uartinit"
   \            696E6974
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "init">`:
   \   000000   696E6974     DB "init"
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "disc">`:
   \   000000   64697363     DB "disc"
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "not ok">`:
   \   000000   6E6F7420     DB "not ok"
   \            6F6B00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "ok">`:
   \   000000   6F6B00       DB "ok"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "ROU">`:
   \   000000   524F5500     DB "ROU"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "END">`:
   \   000000   454E4400     DB "END"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "discovery">`:
   \   000000   64697363     DB "discovery"
   \            6F766572
   \            7900    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "join">`:
   \   000000   6A6F696E     DB "join"
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "rejoin">`:
   \   000000   72656A6F     DB "rejoin"
   \            696E00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "orphan">`:
   \   000000   6F727068     DB "orphan"
   \            616E00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "device online as end">`:
   \   000000   64657669     DB "device online as end"
   \            6365206F
   \            6E6C696E
   \            65206173
   \            20656E64
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "device online as rou">`:
   \   000000   64657669     DB "device online as rou"
   \            6365206F
   \            6E6C696E
   \            65206173
   \            20726F75
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "bulid net">`:
   \   000000   62756C69     DB "bulid net"
   \            64206E65
   \            7400    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "net ready">`:
   \   000000   6E657420     DB "net ready"
   \            72656164
   \            7900    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "wrong channel">`:
   \   000000   77726F6E     DB "wrong channel"
   \            67206368
   \            616E6E65
   \            6C00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "YES">`:
   \   000000   59455300     DB "YES"
    893          
    894          
    895          /*********************************************************************
    896          *********************************************************************/
    897          

   Maximum stack usage in bytes:

     Function                    ISTACK PSTACK XSTACK
     --------                    ------ ------ ------
     SampleApp_Init                  0      0     38
       -> afRegister                 0      0     76
       -> HalUARTOpen                0      0     76
       -> HalUARTWrite               0      0     76
     SampleApp_MessageMSGCB          1      0     77
       -> osal_memcpy                0      0    118
       -> AF_DataRequest             0      0    130
       -> NLME_UpdateNV              0      0    112
       -> osal_nv_item_len           0      0    116
       -> osal_nv_write              0      0    120
       -> osal_start_timerEx         0      0    112
       -> NLME_GetShortAddr          0      0    112
       -> To_string                  0      0    112
       -> AF_DataRequest             0      0    130
       -> HalUARTWrite               0      0    112
       -> HalUARTWrite               0      0    112
       -> HalUARTWrite               0      0    112
       -> HalUARTWrite               0      0    112
       -> NLME_UpdateNV              0      0    112
       -> osal_nv_item_len           0      0    116
       -> osal_nv_write              0      0    120
       -> osal_start_timerEx         0      0    112
     SampleApp_ProcessEvent          0      0     12
       -> osal_msg_receive           0      0     24
       -> HalUARTWrite               0      0     24
       -> osal_msg_deallocate        0      0     24
       -> osal_msg_receive           0      0     24
       -> HalUARTWrite               0      0     24
       -> HalUARTWrite               0      0     24
       -> osal_set_event             0      0     24
       -> osal_set_event             0      0     24
       -> SampleApp_MessageMSGCB     0      0     24
       -> HalUARTWrite               0      0     24
       -> ShowInfo                   0      0     24
       -> osal_rand                  0      0     24
       -> osal_start_timerEx         0      0     24
     ShowInfo                        0      0     67
       -> osal_memcpy                0      0     98
       -> osal_memcpy                0      0     98
       -> NLME_GetShortAddr          0      0     92
       -> To_string                  0      0     92
       -> osal_memcpy                0      0     98
       -> AF_DataRequest             0      0    110
     To_string                       1      0     66
     Uart_Read                       1      0     60
       -> Hal_UART_RxBufLen          0      0    102
       -> HalUARTRead                0      0    102
       -> NLME_GetShortAddr          0      0    102
       -> To_string                  0      0    102
       -> NLME_GetExtAddr            0      0    102
       -> To_string                  0      0    102
       -> osal_memcpy                0      0    108
       -> Uart_Write                 0      0    106
       -> Uart_Write                 0      0    106
       -> Uart_Write                 0      0    106
       -> Uart_Write                 0      0    106
       -> Uart_Write                 0      0    106
       -> Uart_Write                 0      0    106
       -> Uart_Write                 0      0    106
       -> Uart_Write                 0      0    106
       -> Uart_Write                 0      0    106
       -> Uart_Write                 0      0    106
       -> Uart_Write                 0      0    106
       -> Uart_Write                 0      0    106
       -> Uart_Write                 0      0    106
       -> AF_DataRequest             0      0    120
       -> Uart_Write                 0      0    106
       -> osal_memcpy                0      0    108
       -> NLME_UpdateNV              0      0    102
       -> osal_nv_item_len           0      0    106
       -> osal_nv_write              0      0    110
       -> osal_start_timerEx         0      0    102
       -> HalUARTWrite               0      0    102
       -> NLME_UpdateNV              0      0    102
       -> osal_nv_item_len           0      0    106
       -> osal_nv_write              0      0    110
       -> osal_start_timerEx         0      0    102
     Uart_Write                      1      0    318
       -> HalUARTWrite               0      0    530


   Segment part sizes:

     Function/Label                     Bytes
     --------------                     -----
     _A_IEN0                               1
     WDCTL                                 1
     uart_rdata                           40
     uart_rdlenrightflag                   1
     uart_rdsuccessflag                    1
     uart_rd_enableflag                    1
     uart_rdlen                            1
     uart_rdlentemp                        1
     reset_flag                            1
     send_rdata                          128
     num                                   8
     num1                                  8
     mypanid                               2
     SampleApp_ClusterList                 4
     SampleApp_SimpleDesc                 12
     SampleApp_epDesc                      6
     SampleApp_TaskID                      1
     SampleApp_TransID                     1
     SampleApp_NwkState                    1
     SampleApp_Init                      119
     ?Subroutine0                          5
     SampleApp_ProcessEvent              302
     ??Subroutine17_0                     11
     Uart_Read                          1057
     ?Subroutine7                          6
     ?Subroutine6                         16
     ?Subroutine5                         10
     ?Subroutine2                          3
     ??Subroutine18_0                      5
     ?Subroutine16                        14
     ?Subroutine14                        10
     ??Subroutine19_0                      6
     ?Subroutine4                          8
     ?Subroutine1                          8
     ?Subroutine15                         2
     ??Subroutine20_0                     12
     Uart_Write                          189
     To_string                           133
     ShowInfo                            416
     ?Subroutine10                         4
     ?Subroutine9                         11
     ?Subroutine8                          7
     ?Subroutine11                        11
     ?Subroutine3                         10
     SampleApp_MessageMSGCB              634
     ?Subroutine13                        12
     ?Subroutine12                        16
     ??SampleApp_Init?relay                6
     ??SampleApp_ProcessEvent?relay        6
     ??Uart_Read?relay                     6
     ??Uart_Write?relay                    6
     ??To_string?relay                     6
     ??ShowInfo?relay                      6
     ??SampleApp_MessageMSGCB?relay        6
     ?<Constant "uartinit">                9
     ?<Constant "init">                    5
     ?<Constant "disc">                    5
     ?<Constant "not ok">                  7
     ?<Constant "ok">                      3
     ?<Constant "ROU">                     4
     ?<Constant "END">                     4
     ?<Constant "discovery">              10
     ?<Constant "join">                    5
     ?<Constant "rejoin">                  7
     ?<Constant "orphan">                  7
     ?<Constant "device online as end">   21
     ?<Constant "device online as rou">   21
     ?<Constant "bulid net">              10
     ?<Constant "net ready">              10
     ?<Constant "wrong channel">          14
     ?<Constant "YES">                     4

 
 3 037 bytes in segment BANKED_CODE
    42 bytes in segment BANK_RELAYS
     2 bytes in segment SFR_AN
   162 bytes in segment XDATA_ROM_C
   201 bytes in segment XDATA_Z
 
 3 079 bytes of CODE  memory
   162 bytes of CONST memory
     0 bytes of DATA  memory (+ 2 bytes shared)
   201 bytes of XDATA memory

Errors: none
Warnings: 5
